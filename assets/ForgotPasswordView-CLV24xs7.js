import{d as C,r as x,o as l,c as p,b as o,u as e,a as i,w as a,f as g,e as _,n as B,t as M,a2 as F,$ as H,q as D,a1 as f,am as I,h as v}from"./index-G40RhZjV.js";import{t as k,o as E,s as b,u as $,_ as h}from"./InputFormField.vue_vue_type_script_setup_true_lang-DcZHx8_5.js";import{M as U}from"./mail-BMY67FPC.js";import{L as O}from"./lock-keyhole-CPiSHnBo.js";const Y={class:"mt-6"},q={class:"mb-2.5"},K={class:"mt-5"},J=C({__name:"ForgotPasswordForm",props:{isSendingCode:{type:Boolean},sendCode:{type:Function},setView:{type:Function},setAnimation:{type:Function},setEmail:{type:Function}},setup(w){const d=w,u=k(E({email:b().email()})),r=$({validationSchema:u}).handleSubmit(async t=>{await d.sendCode(t.email,!1)&&(d.setEmail(t.email),d.setAnimation("fade-right"),d.setView("ENTER_OTP"))});return(t,s)=>{const m=x("RouterLink");return l(),p("div",null,[s[3]||(s[3]=o("div",{class:"text-2xl font-medium"},"Forgot Password?",-1)),s[4]||(s[4]=o("div",{class:"mt-2.5 text-slate-600 dark:text-slate-500"}," Enter your email address and we’ll send you an OTP code to reset your password. ",-1)),o("div",Y,[o("form",{onSubmit:s[0]||(s[0]=(...n)=>e(r)&&e(r)(...n))},[o("div",q,[i(h,{name:"email",type:"text",placeholder:"Email",disabled:t.isSendingCode},{default:a(()=>[i(e(U),{class:"size-4"})]),_:1},8,["disabled"])]),o("div",K,[i(e(_),{type:"submit",class:"w-full mb-2",loading:t.isSendingCode,"show-loading":""},{default:a(()=>s[1]||(s[1]=[g(" Confirm ")])),_:1},8,["loading"]),i(m,{to:t.isSendingCode?"":{name:"login"},class:B({"cursor-default opacity-50":t.isSendingCode})},{default:a(()=>[i(e(_),{type:"submit",class:"w-full",variant:"outline",disabled:t.isSendingCode},{default:a(()=>s[2]||(s[2]=[g(" Back To Sign In ")])),_:1},8,["disabled"])]),_:1},8,["to","class"])])],32)])])}}}),Q={class:"mt-6"},X={class:"mb-2.5"},Z={class:"mb-2.5"},ee={class:"mt-5"},se=C({__name:"ChangePasswordForm",props:{email:{},otp:{},setView:{type:Function},setAnimation:{type:Function}},setup(w){const{resetPassword:d,resetPasswordLoading:u}=M(),c=w,r=k(E({password:b().min(8,"Password must be at least 8 characters"),confirmPassword:b()}).refine(m=>m.password===m.confirmPassword,{path:["confirmPassword"],message:"Passwords must match."})),s=$({validationSchema:r}).handleSubmit(async(m,n)=>{await d({email:c.email,otp:c.otp,...m},n)||(c.setAnimation("fade-left"),c.setView("ENTER_OTP"))});return(m,n)=>(l(),p("div",null,[n[2]||(n[2]=o("div",{class:"text-2xl font-medium"},"Enter New Password",-1)),o("div",Q,[o("form",{onSubmit:n[0]||(n[0]=(...y)=>e(s)&&e(s)(...y))},[o("div",X,[i(h,{name:"password",type:"password",placeholder:"Password",disabled:e(u)},{default:a(()=>[i(e(O),{class:"size-4"})]),_:1},8,["disabled"])]),o("div",Z,[i(h,{name:"confirmPassword",type:"password",placeholder:"Confirm Password",disabled:e(u)},{default:a(()=>[i(e(O),{class:"size-4"})]),_:1},8,["disabled"])]),o("div",ee,[i(e(_),{type:"submit",class:"w-full mb-2",loading:e(u),"show-loading":""},{default:a(()=>n[1]||(n[1]=[g(" Update Password ")])),_:1},8,["loading"])])],32)])]))}}),te={class:"mt-2.5 text-slate-600 dark:text-slate-500"},oe={key:0,class:"font-medium text-primary mt-2"},ne={key:1},ie={key:0,class:"font-medium text-primary mt-2"},ae={key:1,class:"font-medium text-primary mt-2"},de={key:2,class:"flex gap-2 mt-2"},me={class:"mt-6"},le={class:"mb-2.5"},re={class:"mt-5"},ue=C({__name:"EnterOtpForm",props:{email:{},countdown:{},codeSentMessageShow:{type:Boolean},isSendingCode:{type:Boolean},counting:{type:Boolean},sendCode:{type:Function},setCounting:{type:Function},setView:{type:Function},setAnimation:{type:Function},setOtp:{type:Function}},setup(w){const d=w,u=k(E({otp:b().regex(/^\d+$/,{message:"OTP must contain only numbers."})})),r=$({validationSchema:u}).handleSubmit(async t=>{d.setOtp(t.otp),d.setAnimation("fade-right"),d.setView("CHANGE_PASSWORD")});return(t,s)=>{const m=x("vue-countdown");return l(),p("div",null,[s[5]||(s[5]=o("div",{class:"text-2xl font-medium"},"Verify It's Your Account",-1)),o("div",te,[s[3]||(s[3]=g(" Please check your email inbox or spam folder for the OTP code. ")),i(F,{name:"fade-top",mode:"out-in"},{default:a(()=>[t.isSendingCode?(l(),p("div",oe,"Sending OTP code...")):(l(),p("div",ne,[i(F,{name:"fade",mode:"out-in"},{default:a(()=>[t.codeSentMessageShow?(l(),p("div",ie," Code has been sent ✅ ")):!t.codeSentMessageShow&&t.counting&&t.countdown>0?(l(),p("div",ae,[i(m,{time:t.countdown,onEnd:s[0]||(s[0]=n=>t.setCounting(!1))},{default:a(({totalSeconds:n})=>[g("You can resend OTP in "+H(n)+" seconds.",1)]),_:1},8,["time"])])):!t.codeSentMessageShow&&!t.counting?(l(),p("div",de,[o("a",{href:"javascript:;",class:"font-medium text-primary transition-colors hover:text-slate-600 dark:hover:text-slate-400",onClick:s[1]||(s[1]=n=>t.sendCode(t.email))}," Resend Code ")])):D("",!0)]),_:1})]))]),_:1})]),o("div",me,[o("form",{onSubmit:s[2]||(s[2]=(...n)=>e(r)&&e(r)(...n))},[o("div",le,[i(h,{name:"otp",type:"text",placeholder:"Enter OTP",disabled:t.isSendingCode},{default:a(()=>[i(e(O),{class:"size-4"})]),_:1},8,["disabled"])]),o("div",re,[i(e(_),{type:"submit",class:B(["w-full mb-2",{"opacity-50":t.isSendingCode}]),disabled:t.isSendingCode,"show-loading":""},{default:a(()=>s[4]||(s[4]=[g(" Proceed ")])),_:1},8,["class","disabled"])])],32)])])}}}),ge=C({__name:"ForgotPasswordView",setup(w){const{forgetPassword:d,forgetPasswordLoading:u}=M(),[c,r]=f("FORGOT_PASSWORD"),[t,s]=f("fade-right"),[m,n]=f(""),[y,L]=f(""),[A,z]=f(0),[G,P]=f(!1),[W,T]=f(!1),{start:j}=I(()=>{P(!1)},3e3),V=async(R,N=!0)=>{const S=await d({email:R,updateRefreshTime:N});return S&&S.wasUpdated?(P(!0),j(),z(S.refreshTime-new Date().getTime()),A.value>0&&T(!0)):(P(!1),T(!1)),!!S};return(R,N)=>(l(),v(F,{name:e(t),mode:"out-in"},{default:a(()=>[e(c)==="FORGOT_PASSWORD"?(l(),v(J,{key:0,"set-view":e(r),"set-animation":e(s),"set-email":e(n),"send-code":V,"is-sending-code":e(u)},null,8,["set-view","set-animation","set-email","is-sending-code"])):e(c)==="ENTER_OTP"?(l(),v(ue,{key:1,email:e(m),"code-sent-message-show":e(G),countdown:e(A),counting:e(W),"set-counting":e(T),"set-view":e(r),"set-animation":e(s),"set-otp":e(L),"send-code":V,"is-sending-code":e(u)},null,8,["email","code-sent-message-show","countdown","counting","set-counting","set-view","set-animation","set-otp","is-sending-code"])):e(c)==="CHANGE_PASSWORD"?(l(),v(se,{key:2,"set-view":e(r),"set-animation":e(s),email:e(m),otp:e(y)},null,8,["set-view","set-animation","email","otp"])):D("",!0)]),_:1},8,["name"]))}});export{ge as default};

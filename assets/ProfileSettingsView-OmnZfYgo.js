import{t as sn,o as on,s as et,l as ci,u as an,_ as ht}from"./InputFormField.vue_vue_type_script_setup_true_lang-DcZHx8_5.js";import{g as Jt,o as V,h as te,i as Ke,r as Se,a as X,w as ee,F as ui,j as fi,k as xt,l as ei,v as Mi,m as Si,p as hn,q as Mt,s as $e,C as ft,L as Lt,d as Ci,t as Ei,x as ln,y as cn,c as At,b as le,u as $,U as lt,z as un,f as ct,e as ut,A as fn,B as dn,n as di,D as mn,E as gn,_ as pn}from"./index-G40RhZjV.js";import{u as Ii}from"./user-Cxj83i76.js";import{_ as vn}from"./TextareaFormField.vue_vue_type_script_setup_true_lang-DRrejOH8.js";import{M as bn}from"./mail-BMY67FPC.js";/**
 * @license lucide-vue-next v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=Jt("ImageIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-vue-next v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=Jt("PenLineIcon",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-vue-next v0.471.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=Jt("Trash2Icon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function mi(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,s)}return r}function Y(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?mi(Object(r),!0).forEach(function(s){Me(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mi(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Me(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function zn(e,n){if(e==null)return{};var r,s,i=function(o,h){if(o==null)return{};var l,d,a={},u=Object.keys(o);for(d=0;d<u.length;d++)l=u[d],h.indexOf(l)>=0||(a[l]=o[l]);return a}(e,n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(s=0;s<t.length;s++)r=t[s],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Ge(e){return function(n){if(Array.isArray(n))return Ht(n)}(e)||function(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}(e)||function(n,r){if(n){if(typeof n=="string")return Ht(n,r);var s=Object.prototype.toString.call(n).slice(8,-1);if(s==="Object"&&n.constructor&&(s=n.constructor.name),s==="Map"||s==="Set")return Array.from(n);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return Ht(n,r)}}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ht(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=new Array(n);r<n;r++)s[r]=e[r];return s}var gi,Rn,pt,se=(gi=function(e){/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){var n={}.hasOwnProperty;function r(){for(var s=[],i=0;i<arguments.length;i++){var t=arguments[i];if(t){var o=typeof t;if(o==="string"||o==="number")s.push(t);else if(Array.isArray(t)){if(t.length){var h=r.apply(null,t);h&&s.push(h)}}else if(o==="object")if(t.toString===Object.prototype.toString)for(var l in t)n.call(t,l)&&t[l]&&s.push(l);else s.push(t.toString())}}return s.join(" ")}e.exports?(r.default=r,e.exports=r):window.classNames=r})()},gi(pt={path:Rn,exports:{},require:function(e,n){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(n==null&&pt.path)}},pt.exports),pt.exports),Ee=function(e){return function(n,r){if(!n)return e;var s;typeof n=="string"?s=n:r=n;var i=e;return s&&(i+="__"+s),i+(r?Object.keys(r).reduce(function(t,o){var h=r[o];return h&&(t+=" "+(typeof h=="boolean"?i+"--"+o:i+"--"+o+"_"+h)),t},""):"")}};function Qt(e,n,r){var s,i,t,o,h;function l(){var a=Date.now()-o;a<n&&a>=0?s=setTimeout(l,n-a):(s=null,r||(h=e.apply(t,i),t=i=null))}n==null&&(n=100);var d=function(){t=this,i=arguments,o=Date.now();var a=r&&!s;return s||(s=setTimeout(l,n)),a&&(h=e.apply(t,i),t=i=null),h};return d.clear=function(){s&&(clearTimeout(s),s=null)},d.flush=function(){s&&(h=e.apply(t,i),t=i=null,clearTimeout(s),s=null)},d}Qt.debounce=Qt;var qt=Qt,j=function(){return j=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++)for(var i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},j.apply(this,arguments)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Ti(e,n){var r,s;return e&&n?(r=""+e+n[0].toUpperCase()+n.slice(1),s=e+"-"+n):(r=e||n,s=e||n),{name:r,classname:s}}function Ui(e){return/^blob:/.test(e)}function pi(e){return Ui(e)||function(n){return/^data:/.test(n)}(e)}function tt(e){return!!(e&&e.constructor&&e.call&&e.apply)}function ue(e){return e===void 0}function zt(e){return typeof e=="object"&&e!==null}function Vt(e,n,r){var s={};return zt(e)?(Object.keys(n).forEach(function(i){ue(e[i])?s[i]=n[i]:zt(n[i])?zt(e[i])?s[i]=Vt(e[i],n[i],r[i]):s[i]=e[i]?n[i]:r[i]:n[i]===!0||n[i]===!1?s[i]=!!e[i]:s[i]=e[i]}),s):e?n:r}function vt(e){var n=Number(e);return Number.isNaN(n)?e:n}function vi(e){return typeof(e=="number"||function(n){return typeof n=="object"&&n!==null}(e)&&toString.call(e)=="[object Number]")&&!_i(e)}function _i(e){return e!=e}function Oi(e,n){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}var dt=function(e,n){e===void 0&&(e={}),n===void 0&&(n={}),this.type="manipulateImage",this.move=e,this.scale=n},xn=function(e,n){n===void 0&&(n={}),this.type="resize",this.directions=e,this.params=n},ti=function(e){this.type="move",this.directions=e},Mn=function(){function e(n,r,s,i,t){this.type="drag",this.nativeEvent=n,this.position=s,this.previousPosition=i,this.element=r,this.anchor=t}return e.prototype.shift=function(){var n=this,r=n.element,s=n.anchor,i=n.position;if(r){var t=r.getBoundingClientRect(),o=t.left,h=t.top;return{left:i.left-o-s.left,top:i.top-h-s.top}}return{left:0,top:0}},e}(),ii={name:"DraggableElement",props:{classname:{type:String}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){if(!this.$refs.draggable)throw new Error('You should add ref "draggable" to your root element to use draggable mixin');this.touches=[],this.hovered=!1},methods:{onMouseOver:function(){this.hovered||(this.hovered=!0,this.$emit("enter"))},onMouseLeave:function(){this.hovered&&!this.touches.length&&(this.hovered=!1,this.$emit("leave"))},onTouchStart:function(e){e.cancelable&&!this.disabled&&e.touches.length===1&&(this.touches=Ge(e.touches),this.hovered||(this.$emit("enter"),this.hovered=!0),e.touches.length&&this.initAnchor(this.touches.reduce(function(n,r){return{clientX:n.clientX+r.clientX/e.touches.length,clientY:n.clientY+r.clientY/e.touches.length}},{clientX:0,clientY:0})),e.preventDefault&&e.preventDefault(),e.stopPropagation())},onTouchEnd:function(){this.processEnd()},onTouchMove:function(e){this.touches.length&&(this.processMove(e,e.touches),e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation())},onMouseDown:function(e){if(!this.disabled){var n={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[n],this.initAnchor(n),e.stopPropagation()}},onMouseMove:function(e){this.touches.length&&(this.processMove(e,[{fake:!0,clientX:e.clientX,clientY:e.clientY}]),e.preventDefault&&e.preventDefault())},onMouseUp:function(){this.processEnd()},initAnchor:function(e){var n=this.$refs.draggable.getBoundingClientRect(),r=n.left,s=n.right,i=n.bottom,t=n.top;this.anchor={left:e.clientX-r,top:e.clientY-t,bottom:i-e.clientY,right:s-e.clientX}},processMove:function(e,n){var r=Ge(n);if(this.touches.length){if(this.touches.length===1&&r.length===1){var s=this.$refs.draggable;this.$emit("drag",new Mn(e,s,{left:r[0].clientX,top:r[0].clientY},{left:this.touches[0].clientX,top:this.touches[0].clientY},this.anchor))}this.touches=r}},processEnd:function(){this.touches.length&&this.$emit("drag-end"),this.hovered&&(this.$emit("leave"),this.hovered=!1),this.touches=[]}},emits:["drag","drag-end","leave","enter"]};ii.render=function(e,n,r,s,i,t){return V(),te("div",{ref:"draggable",class:r.classname,onTouchstart:n[1]||(n[1]=function(){return t.onTouchStart&&t.onTouchStart.apply(t,arguments)}),onMousedown:n[2]||(n[2]=function(){return t.onMouseDown&&t.onMouseDown.apply(t,arguments)}),onMouseover:n[3]||(n[3]=function(){return t.onMouseOver&&t.onMouseOver.apply(t,arguments)}),onMouseleave:n[4]||(n[4]=function(){return t.onMouseLeave&&t.onMouseLeave.apply(t,arguments)})},[Ke(e.$slots,"default")],34)};var kt=Ee("vue-handler-wrapper"),Fi={name:"HandlerWrapper",components:{DraggableElement:ii},props:{horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},computed:{classes:function(){var e;if(this.horizontalPosition||this.verticalPosition){var n,r=Ti(this.horizontalPosition,this.verticalPosition);e=kt((Me(n={},r.classname,!0),Me(n,"disabled",this.disabled),n))}else e=kt({disabled:this.disabled});return{root:e,draggable:kt("draggable")}}},emits:["leave","enter","drag","drag-end"]};Fi.render=function(e,n,r,s,i,t){var o=Se("DraggableElement");return V(),te("div",{class:t.classes.root},[X(o,{class:t.classes.draggable,onDrag:n[1]||(n[1]=function(h){return e.$emit("drag",h)}),onDragEnd:n[2]||(n[2]=function(h){return e.$emit("drag-end")}),onLeave:n[3]||(n[3]=function(h){return e.$emit("leave")}),onEnter:n[4]||(n[4]=function(h){return e.$emit("enter")})},{default:ee(function(){return[Ke(e.$slots,"default")]}),_:3},8,["class"])],2)};var Sn=Ee("vue-line-wrapper"),Di={name:"LineWrapper",components:{DraggableElement:ii},props:{position:{type:String,required:!0},disabled:{type:Boolean,default:!1}},computed:{classname:function(){var e;return Sn((Me(e={},this.position,!0),Me(e,"disabled",this.disabled),e))}},emits:["leave","enter","drag","drag-end"]};Di.render=function(e,n,r,s,i,t){var o=Se("DraggableElement");return V(),te(o,{class:t.classname,onDrag:n[1]||(n[1]=function(h){return e.$emit("drag",h)}),onDragEnd:n[2]||(n[2]=function(h){return e.$emit("drag-end")}),onLeave:n[3]||(n[3]=function(h){return e.$emit("leave")}),onEnter:n[4]||(n[4]=function(h){return e.$emit("enter")})},{default:ee(function(){return[Ke(e.$slots,"default")]}),_:3},8,["class"])};var De=["left","right","top","bottom"],Cn=["left","right"],En=["top","bottom"],In=["left","top"],Tn=["fill-area","fit-area","stencil","none"],bi={left:0,top:0,width:0,height:0};function wi(e,n,r){return!(r=r||["width","height","left","top"]).some(function(s){return e[s]!==n[s]})}function Pe(e){return{left:e.left,top:e.top,right:e.left+e.width,bottom:e.top+e.height}}function nt(e,n){return{left:e.left-n.left,top:e.top-n.top}}function de(e){return{left:e.left+e.width/2,top:e.top+e.height/2}}function mt(e,n){var r={left:0,top:0,right:0,bottom:0};return De.forEach(function(s){var i=n[s],t=Pe(e)[s];r[s]=i!==void 0&&t!==void 0?s==="left"||s==="top"?Math.max(0,i-t):Math.max(0,t-i):0}),r}function Oe(e,n){return{left:e.left-n.left,top:e.top-n.top,width:e.width+n.left+n.right,height:e.height+n.top+n.bottom}}function Tt(e){return{left:-e.left,top:-e.top}}function Ae(e,n){return j(j({},e),{left:e.left+n.left,top:e.top+n.top})}function Ce(e,n,r,s){if(n!==1){if(r){var i=de(e);return{width:e.width*n,height:e.height*n,left:e.left+e.width*(1-n)/2+(r.left-i.left)*(1-n),top:e.top+e.height*(1-n)/2+(r.top-i.top)*(1-n)}}return{width:e.width*n,height:e.height*n,left:e.left+e.width*(1-n)/2,top:e.top+e.height*(1-n)/2}}return e}function Q(e){return e.width/e.height}function rt(e,n){return Math.min(n.right!==void 0&&n.left!==void 0?(n.right-n.left)/e.width:1/0,n.bottom!==void 0&&n.top!==void 0?(n.bottom-n.top)/e.height:1/0)}function st(e,n){var r={left:0,top:0},s=mt(e,n);return s.left&&s.left>0?r.left=s.left:s.right&&s.right>0&&(r.left=-s.right),s.top&&s.top>0?r.top=s.top:s.bottom&&s.bottom>0&&(r.top=-s.bottom),r}function jt(e,n){var r;return n.minimum&&e<n.minimum?r=n.minimum:n.maximum&&e>n.maximum&&(r=n.maximum),r}function Pi(e,n){var r=Q(e),s=Q(n);return n.width<1/0&&n.height<1/0?r>s?{width:n.width,height:n.width/r}:{width:n.height*r,height:n.height}:n.width<1/0?{width:n.width,height:n.width/r}:n.height<1/0?{width:n.height*r,height:n.height}:e}function Wi(e,n){var r=n*Math.PI/180;return{width:Math.abs(e.width*Math.cos(r))+Math.abs(e.height*Math.sin(r)),height:Math.abs(e.width*Math.sin(r))+Math.abs(e.height*Math.cos(r))}}function Ne(e,n){var r=n*Math.PI/180;return{left:e.left*Math.cos(r)-e.top*Math.sin(r),top:e.left*Math.sin(r)+e.top*Math.cos(r)}}function Ut(e,n){var r=mt(me(e,n),n);return r.left+r.right+r.top+r.bottom?r.left+r.right>r.top+r.bottom?Math.min((e.width+r.left+r.right)/e.width,rt(e,n)):Math.min((e.height+r.top+r.bottom)/e.height,rt(e,n)):1}function me(e,n,r){r===void 0&&(r=!1);var s=st(e,n);return Ae(e,r?Tt(s):s)}function Zt(e){return{width:e.right!==void 0&&e.left!==void 0?e.right-e.left:1/0,height:e.bottom!==void 0&&e.top!==void 0?e.bottom-e.top:1/0}}function Un(e,n){return j(j({},e),{minWidth:Math.min(n.width,e.minWidth),minHeight:Math.min(n.height,e.minHeight),maxWidth:Math.min(n.width,e.maxWidth),maxHeight:Math.min(n.height,e.maxHeight)})}function Li(e,n,r){r===void 0&&(r=!0);var s={};return De.forEach(function(i){var t=e[i],o=n[i];t!==void 0&&o!==void 0?s[i]=i==="left"||i==="top"?r?Math.max(t,o):Math.min(t,o):r?Math.min(t,o):Math.max(t,o):o!==void 0?s[i]=o:t!==void 0&&(s[i]=t)}),s}function _t(e,n){return Li(e,n,!0)}function yi(e){var n=e.size,r=e.aspectRatio,s=e.ignoreMinimum,i=e.sizeRestrictions;return!!((n.correctRatio||Q(n)>=r.minimum&&Q(n)<=r.maximum)&&n.height<=i.maxHeight&&n.width<=i.maxWidth&&n.width&&n.height&&(s||n.height>=i.minHeight&&n.width>=i.minWidth))}function Ai(e,n){return Math.pow(e.width-n.width,2)+Math.pow(e.height-n.height,2)}function He(e){var n=e.width,r=e.height,s=e.sizeRestrictions,i={minimum:e.aspectRatio&&e.aspectRatio.minimum||0,maximum:e.aspectRatio&&e.aspectRatio.maximum||1/0},t={width:Math.max(s.minWidth,Math.min(s.maxWidth,n)),height:Math.max(s.minHeight,Math.min(s.maxHeight,r))};function o(d,a){return a===void 0&&(a=!1),d.reduce(function(u,c){return yi({size:c,aspectRatio:i,sizeRestrictions:s,ignoreMinimum:a})&&(!u||Ai(c,{width:n,height:r})<Ai(u,{width:n,height:r}))?c:u},null)}var h=[];[i.minimum,i.maximum].forEach(function(d){d&&h.push({width:t.width,height:t.width/d,correctRatio:!0},{width:t.height*d,height:t.height,correctRatio:!0})}),yi({size:t,aspectRatio:i,sizeRestrictions:s})&&h.push(t);var l=o(h)||o(h,!0);return l&&{width:l.width,height:l.height}}function Gt(e){var n=e.event,r=e.coordinates,s=e.positionRestrictions,i=s===void 0?{}:s,t=Ae(r,n.directions);return Ae(t,st(t,i))}function _n(e){var n=e.coordinates,r=e.transform,s=e.imageSize,i=e.sizeRestrictions,t=e.positionRestrictions,o=e.aspectRatio,h=e.visibleArea,l=function(a,u){return Gt({coordinates:a,positionRestrictions:t,event:new ti({left:u.left-a.left,top:u.top-a.top})})},d=j({},n);return(Array.isArray(r)?r:[r]).forEach(function(a){var u={};ue((u=typeof a=="function"?a({coordinates:d,imageSize:s,visibleArea:h}):a).width)&&ue(u.height)||(d=function(c,f){var v=j(j(j({},c),He({width:f.width,height:f.height,sizeRestrictions:i,aspectRatio:o})),{left:0,top:0});return l(v,{left:c.left,top:c.top})}(d,j(j({},d),u))),ue(u.left)&&ue(u.top)||(d=l(d,j(j({},d),u)))}),d}function On(e){e.event;var n=e.getAreaRestrictions,r=e.boundaries,s=e.coordinates,i=e.visibleArea;e.aspectRatio;var t=e.stencilSize,o=e.sizeRestrictions,h=e.positionRestrictions;e.stencilReference;var l,d,a,u=j({},s),c=j({},i),f=j({},t);l=Q(f),d=Q(u),a===void 0&&(a=.001),(l===0||d===0?Math.abs(d-l)<a:Math.abs(d/l)<1+a&&Math.abs(d/l)>1-a)||(u=j(j({},u),He({sizeRestrictions:o,width:u.width,height:u.height,aspectRatio:{minimum:Q(f),maximum:Q(f)}})));var v=Ut(c=Ce(c,u.width*r.width/(c.width*f.width)),n({visibleArea:c,type:"resize"}));return v!==1&&(c=Ce(c,v),u=Ce(u,v)),c=me(c=Ae(c,nt(de(u),de(c))),n({visibleArea:c,type:"move"})),{coordinates:u=me(u,_t(Pe(c),h)),visibleArea:c}}function Fn(e){var n=e.event,r=e.getAreaRestrictions,s=e.boundaries,i=e.coordinates,t=e.visibleArea;e.aspectRatio,e.stencilSize,e.sizeRestrictions;var o=e.positionRestrictions;e.stencilReference;var h=j({},i),l=j({},t);if(i&&t&&n.type!=="manipulateImage"){var d={width:0,height:0};l.width,s.width,Q(s)>Q(h)?(d.height=.8*s.height,d.width=d.height*Q(h)):(d.width=.8*s.width,d.height=d.width*Q(h));var a=Ut(l=Ce(l,h.width*s.width/(l.width*d.width)),r({visibleArea:l,type:"resize"}));l=Ce(l,a),a!==1&&(d.height/=a,d.width/=a),l=me(l=Ae(l,nt(de(h),de(l))),r({visibleArea:l,type:"move"})),h=me(h,_t(Pe(l),o))}return{coordinates:h,visibleArea:l}}function Dn(e){var n=e.event,r=e.coordinates,s=e.visibleArea,i=e.getAreaRestrictions,t=j({},s),o=j({},r);if(n.type==="setCoordinates"){var h=Math.max(0,o.width-t.width),l=Math.max(0,o.height-t.height);h>l?t=Ce(t,Math.min(o.width/t.width,rt(t,i({visibleArea:t,type:"resize"})))):l>h&&(t=Ce(t,Math.min(o.height/t.height,rt(t,i({visibleArea:t,type:"resize"}))))),t=me(t=Ae(t,Tt(st(o,Pe(t)))),i({visibleArea:t,type:"move"}))}return{visibleArea:t,coordinates:o}}function Pn(e){var n=e.imageSize,r=e.visibleArea,s=e.coordinates,i=r||n;return{left:(r?r.left:0)+i.width/2-s.width/2,top:(r?r.top:0)+i.height/2-s.height/2}}function Wn(e){var n=e.imageSize,r=e.visibleArea,s=e.aspectRatio,i=e.sizeRestrictions,t=r||n,o=Math.min(s.maximum||1/0,Math.max(s.minimum||0,Q(t))),h=t.width<t.height?{width:.8*t.width,height:.8*t.width/o}:{height:.8*t.height,width:.8*t.height*o};return He(j(j({},h),{aspectRatio:s,sizeRestrictions:i}))}function Ln(e){var n,r,s=e.imageSize,i=e.visibleArea,t=e.boundaries,o=e.aspectRatio,h=e.sizeRestrictions,l=e.stencilSize,d=i||s;return Q(d)>Q(t)?r=(n=l.height*d.height/t.height)*Q(l):n=(r=l.width*d.width/t.width)/Q(l),He({width:r,height:n,aspectRatio:o,sizeRestrictions:h})}function Hn(e){var n=e.getAreaRestrictions,r=e.coordinates,s=e.imageSize,i=Q(e.boundaries);if(r){var t={height:Math.max(r.height,s.height),width:Math.max(r.width,s.width)},o=Pi({width:Q(t)>i?t.width:t.height*i,height:Q(t)>i?t.width/i:t.height},Zt(n())),h={left:r.left+r.width/2-o.width/2,top:r.top+r.height/2-o.height/2,width:o.width,height:o.height},l=mt(r,Pe(j({left:0,top:0},s))),d={};return!l.left&&!l.right&&h.width<=s.width&&(d.left=0,d.right=s.width),!l.top&&!l.bottom&&h.height<=s.height&&(d.top=0,d.bottom=s.height),me(h,d)}var a=Q(s);return o={height:a>i?s.height:s.width/i,width:a>i?s.height*i:s.width},{left:s.width/2-o.width/2,top:s.height/2-o.height/2,width:o.width,height:o.height}}function bt(e,n){return Li(e,Pe(n))}function kn(e){var n=e.event,r=e.coordinates,s=e.visibleArea,i=e.sizeRestrictions,t=e.getAreaRestrictions,o=e.positionRestrictions,h=e.adjustStencil,l=n.scale,d=n.move,a=j({},s),u=j({},r),c=1,f=1,v=l.factor&&Math.abs(l.factor-1)>.001;a=Ae(a,{left:d.left||0,top:d.top||0});var y={stencil:{minimum:Math.max(i.minWidth?i.minWidth/u.width:0,i.minHeight?i.minHeight/u.height:0),maximum:Math.min(i.maxWidth?i.maxWidth/u.width:1/0,i.maxHeight?i.maxHeight/u.height:1/0,rt(u,o))},area:{maximum:rt(a,t({visibleArea:a,type:"resize"}))}};l.factor&&v&&(l.factor<1?(f=Math.max(l.factor,y.stencil.minimum))>1&&(f=1):l.factor>1&&(f=Math.min(l.factor,Math.min(y.area.maximum,y.stencil.maximum)))<1&&(f=1)),f&&(a=Ce(a,f,l.center));var S=r.left-s.left,A=s.width+s.left-(r.width+r.left),O=r.top-s.top,U=s.height+s.top-(r.height+r.top);return a=me(a=Ae(a,st(a,{left:o.left!==void 0?o.left-S*f:void 0,top:o.top!==void 0?o.top-O*f:void 0,bottom:o.bottom!==void 0?o.bottom+U*f:void 0,right:o.right!==void 0?o.right+A*f:void 0})),t({visibleArea:a,type:"move"})),u.width=u.width*f,u.height=u.height*f,u.left=a.left+S*f,u.top=a.top+O*f,u=me(u,_t(Pe(a),o)),l.factor&&v&&h&&(l.factor>1?c=Math.min(y.area.maximum,l.factor)/f:l.factor<1&&(c=Math.max(u.height/a.height,u.width/a.width,l.factor/f)),c!==1&&(a=Ae(a=me(a=Ce(a,c,l.factor>1?l.center:de(u)),t({visibleArea:a,type:"move"})),Tt(st(u,Pe(a)))))),{coordinates:u,visibleArea:a}}function jn(e){var n=e.aspectRatio,r=e.getAreaRestrictions,s=e.coordinates,i=e.visibleArea,t=e.sizeRestrictions,o=e.positionRestrictions,h=e.imageSize,l=e.previousImageSize,d=e.angle,a=j({},s),u=j({},i),c=Ne(de(j({left:0,top:0},l)),d);return(a=j(j({},He({sizeRestrictions:t,aspectRatio:n,width:a.width,height:a.height})),Ne(de(a),d))).left-=c.left-h.width/2+a.width/2,a.top-=c.top-h.height/2+a.height/2,u=Ce(u,Ut(u,r({visibleArea:u,type:"resize"}))),{coordinates:a=me(a,o),visibleArea:u=me(u=Ae(u,nt(de(a),de(s))),r({visibleArea:u,type:"move"}))}}function Bn(e){var n=e.flip,r=e.previousFlip,s=e.rotate,i=e.getAreaRestrictions,t=e.coordinates,o=e.visibleArea,h=e.imageSize,l=j({},t),d=j({},o),a=r.horizontal!==n.horizontal,u=r.vertical!==n.vertical;if(a||u){var c=Ne({left:h.width/2,top:h.height/2},-s),f=Ne(de(l),-s),v=Ne({left:a?c.left-(f.left-c.left):f.left,top:u?c.top-(f.top-c.top):f.top},s);l=Ae(l,nt(v,de(l))),f=Ne(de(d),-s),d=me(d=Ae(d,nt(v=Ne({left:a?c.left-(f.left-c.left):f.left,top:u?c.top-(f.top-c.top):f.top},s),de(d))),i({visibleArea:d,type:"move"}))}return{coordinates:l,visibleArea:d}}function zi(e){var n=e.directions,r=e.coordinates,s=e.positionRestrictions,i=s===void 0?{}:s,t=e.sizeRestrictions,o=e.preserveRatio,h=e.compensate,l=j({},n),d=Oe(r,l).width,a=Oe(r,l).height;d<0&&(l.left<0&&l.right<0?(l.left=-(r.width-t.minWidth)/(l.left/l.right),l.right=-(r.width-t.minWidth)/(l.right/l.left)):l.left<0?l.left=-(r.width-t.minWidth):l.right<0&&(l.right=-(r.width-t.minWidth))),a<0&&(l.top<0&&l.bottom<0?(l.top=-(r.height-t.minHeight)/(l.top/l.bottom),l.bottom=-(r.height-t.minHeight)/(l.bottom/l.top)):l.top<0?l.top=-(r.height-t.minHeight):l.bottom<0&&(l.bottom=-(r.height-t.minHeight)));var u=mt(Oe(r,l),i);h&&(u.left&&u.left>0&&u.right===0?(l.right+=u.left,l.left-=u.left):u.right&&u.right>0&&u.left===0&&(l.left+=u.right,l.right-=u.right),u.top&&u.top>0&&u.bottom===0?(l.bottom+=u.top,l.top-=u.top):u.bottom&&u.bottom>0&&u.top===0&&(l.top+=u.bottom,l.bottom-=u.bottom),u=mt(Oe(r,l),i));var c={width:1/0,height:1/0,left:1/0,right:1/0,top:1/0,bottom:1/0};if(De.forEach(function(y){var S=u[y];S&&l[y]&&(c[y]=Math.max(0,1-S/l[y]))}),o){var f=Math.min.apply(null,De.map(function(y){return c[y]}));f!==1/0&&De.forEach(function(y){l[y]*=f})}else De.forEach(function(y){c[y]!==1/0&&(l[y]*=c[y])});if(d=Oe(r,l).width,a=Oe(r,l).height,l.right+l.left&&(d>t.maxWidth?c.width=(t.maxWidth-r.width)/(l.right+l.left):d<t.minWidth&&(c.width=(t.minWidth-r.width)/(l.right+l.left))),l.bottom+l.top&&(a>t.maxHeight?c.height=(t.maxHeight-r.height)/(l.bottom+l.top):a<t.minHeight&&(c.height=(t.minHeight-r.height)/(l.bottom+l.top))),o){var v=Math.min(c.width,c.height);v!==1/0&&De.forEach(function(y){l[y]*=v})}else c.width!==1/0&&Cn.forEach(function(y){l[y]*=c.width}),c.height!==1/0&&En.forEach(function(y){l[y]*=c.height});return l}function wt(e,n,r){return n==0&&r==0?e/2:n==0?0:r==0?e:e*Math.abs(n/(n+r))}var $n=Ee("vue-simple-handler"),Nn=Ee("vue-simple-handler-wrapper"),Ot={name:"SimpleHandler",components:{HandlerWrapper:Fi},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){var e,n=(Me(e={},this.horizontalPosition,!!this.horizontalPosition),Me(e,this.verticalPosition,!!this.verticalPosition),Me(e,"".concat(this.horizontalPosition,"-").concat(this.verticalPosition),!!(this.verticalPosition&&this.horizontalPosition)),Me(e,"hover",this.hover),e);return{default:se($n(n),this.defaultClass,this.hover&&this.hoverClass),wrapper:se(Nn(n),this.wrapperClass)}}},methods:{onDrag:function(e){this.$emit("drag",e)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}},emits:["drag","drag-end"]};Ot.render=function(e,n,r,s,i,t){var o=Se("HandlerWrapper");return V(),te(o,{class:t.classes.wrapper,"vertical-position":r.verticalPosition,"horizontal-position":r.horizontalPosition,disabled:r.disabled,onDrag:t.onDrag,onDragEnd:t.onDragEnd,onEnter:t.onEnter,onLeave:t.onLeave},{default:ee(function(){return[X("div",{class:t.classes.default},null,2)]}),_:1},8,["class","vertical-position","horizontal-position","disabled","onDrag","onDragEnd","onEnter","onLeave"])};var Xn=Ee("vue-simple-line"),Yn=Ee("vue-simple-line-wrapper"),Ft={name:"SimpleLine",components:{LineWrapper:Di},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},position:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){return{root:se(Xn(Me({},this.position,!0)),this.defaultClass,this.hover&&this.hoverClass),wrapper:se(Yn(Me({},this.position,!0)),this.wrapperClass)}}},methods:{onDrag:function(e){this.$emit("drag",e)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}},emits:["drag","drag-end"]};Ft.render=function(e,n,r,s,i,t){var o=Se("LineWrapper");return V(),te(o,{class:t.classes.wrapper,position:r.position,disabled:r.disabled,onDrag:t.onDrag,onDragEnd:t.onDragEnd,onEnter:t.onEnter,onLeave:t.onLeave},{default:ee(function(){return[X("div",{class:t.classes.root},null,2)]}),_:1},8,["class","position","disabled","onDrag","onDragEnd","onEnter","onLeave"])};var Bt=Ee("vue-bounding-box"),Qn=["east","west",null],qn=["south","north",null],ni={name:"BoundingBox",props:{width:{type:Number},height:{type:Number},transitions:{type:Object},handlers:{type:Object,default:function(){return{eastNorth:!0,north:!0,westNorth:!0,west:!0,westSouth:!0,south:!0,eastSouth:!0,east:!0}}},handlersComponent:{type:[Object,String],default:function(){return Ot}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}},lines:{type:Object,default:function(){return{west:!0,north:!0,east:!0,south:!0}}},linesComponent:{type:[Object,String],default:function(){return Ft}},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},resizable:{type:Boolean,default:!0}},data:function(){var e=[];return Qn.forEach(function(n){qn.forEach(function(r){if(n!==r){var s=Ti(n,r),i=s.name,t=s.classname;e.push({name:i,classname:t,verticalDirection:r,horizontalDirection:n})}})}),{points:e}},computed:{style:function(){var e={};return this.width&&this.height&&(e.width="".concat(this.width,"px"),e.height="".concat(this.height,"px"),this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction))),e},classes:function(){var e=this.handlersClasses,n=this.handlersWrappersClasses,r=this.linesClasses,s=this.linesWrappersClasses;return{root:Bt(),handlers:e,handlersWrappers:n,lines:r,linesWrappers:s}},lineNodes:function(){var e=this,n=[];return this.points.forEach(function(r){r.horizontalDirection&&r.verticalDirection||!e.lines[r.name]||n.push({name:r.name,component:e.linesComponent,class:se(e.classes.lines.default,e.classes.lines[r.name],!e.resizable&&e.classes.lines.disabled),wrapperClass:se(e.classes.linesWrappers.default,e.classes.linesWrappers[r.name],!e.resizable&&e.classes.linesWrappers.disabled),hoverClass:e.classes.lines.hover,verticalDirection:r.verticalDirection,horizontalDirection:r.horizontalDirection,disabled:!e.resizable})}),n},handlerNodes:function(){var e=this,n=[],r=this.width,s=this.height;return this.points.forEach(function(i){if(e.handlers[i.name]){var t={name:i.name,component:e.handlersComponent,class:se(e.classes.handlers.default,e.classes.handlers[i.name]),wrapperClass:se(e.classes.handlersWrappers.default,e.classes.handlersWrappers[i.name]),hoverClass:e.classes.handlers.hover,verticalDirection:i.verticalDirection,horizontalDirection:i.horizontalDirection,disabled:!e.resizable};if(r&&s){var o=i.horizontalDirection,h=i.verticalDirection,l=o==="east"?r:o==="west"?0:r/2,d=h==="south"?s:h==="north"?0:s/2;t.wrapperClass=Bt("handler"),t.wrapperStyle={transform:"translate(".concat(l,"px, ").concat(d,"px)")},e.transitions&&e.transitions.enabled&&(t.wrapperStyle.transition="".concat(e.transitions.time,"ms ").concat(e.transitions.timingFunction))}else t.wrapperClass=Bt("handler",Me({},i.classname,!0));n.push(t)}}),n}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[]},methods:{onEnd:function(){this.$emit("resize-end")},onHandlerDrag:function(e,n,r){var s,i=e.shift(),t=i.left,o=i.top,h={left:0,right:0,top:0,bottom:0};n==="west"?h.left-=t:n==="east"&&(h.right+=t),r==="north"?h.top-=o:r==="south"&&(h.bottom+=o),!r&&n?s="width":r&&!n&&(s="height"),this.resizable&&this.$emit("resize",new xn(h,{allowedDirections:{left:n==="west"||!n,right:n==="east"||!n,bottom:r==="south"||!r,top:r==="north"||!r},preserveAspectRatio:e.nativeEvent&&e.nativeEvent.shiftKey,respectDirection:s}))}},emits:["resize","resize-end"]};ni.render=function(e,n,r,s,i,t){return V(),te("div",{ref:"box",class:t.classes.root,style:t.style},[Ke(e.$slots,"default"),X("div",null,[(V(!0),te(ui,null,fi(t.lineNodes,function(o){return V(),te(xt(o.component),{key:o.name,"default-class":o.class,"hover-class":o.hoverClass,"wrapper-class":o.wrapperClass,position:o.name,disabled:o.disabled,onDrag:function(h){return t.onHandlerDrag(h,o.horizontalDirection,o.verticalDirection)},onDragEnd:n[1]||(n[1]=function(h){return t.onEnd()})},null,8,["default-class","hover-class","wrapper-class","position","disabled","onDrag"])}),128))]),(V(!0),te(ui,null,fi(t.handlerNodes,function(o){return V(),te("div",{key:o.name,style:o.wrapperStyle,class:o.wrapperClass},[(V(),te(xt(o.component),{"default-class":o.class,"hover-class":o.hoverClass,"wrapper-class":o.wrapperClass,"horizontal-position":o.horizontalDirection,"vertical-position":o.verticalDirection,disabled:o.disabled,onDrag:function(h){return t.onHandlerDrag(h,o.horizontalDirection,o.verticalDirection)},onDragEnd:n[2]||(n[2]=function(h){return t.onEnd()})},null,8,["default-class","hover-class","wrapper-class","horizontal-position","vertical-position","disabled","onDrag"]))],6)}),128))],6)};var Vn=Ee("vue-draggable-area"),ri={name:"DraggableArea",props:{movable:{type:Boolean,default:!0},activationDistance:{type:Number,default:20}},computed:{classnames:function(){return{default:Vn()}}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[],this.touchStarted=!1},methods:{onTouchStart:function(e){if(e.cancelable){var n=this.movable&&e.touches.length===1;n&&(this.touches=Ge(e.touches)),(this.touchStarted||n)&&(e.preventDefault(),e.stopPropagation())}},onTouchEnd:function(){this.touchStarted=!1,this.processEnd()},onTouchMove:function(e){this.touches.length>=1&&(this.touchStarted?(this.processMove(e,e.touches),e.preventDefault(),e.stopPropagation()):Oi({x:this.touches[0].clientX,y:this.touches[0].clientY},{x:e.touches[0].clientX,y:e.touches[0].clientY})>this.activationDistance&&(this.initAnchor({clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}),this.touchStarted=!0))},onMouseDown:function(e){if(this.movable&&e.button===0){var n={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[n],this.initAnchor(n),e.stopPropagation()}},onMouseMove:function(e){this.touches.length&&(this.processMove(e,[{fake:!0,clientX:e.clientX,clientY:e.clientY}]),e.preventDefault&&e.cancelable&&e.preventDefault(),e.stopPropagation())},onMouseUp:function(){this.processEnd()},initAnchor:function(e){var n=this.$refs.container.getBoundingClientRect(),r=n.left,s=n.top;this.anchor={x:e.clientX-r,y:e.clientY-s}},processMove:function(e,n){var r=Ge(n);if(this.touches.length){var s=this.$refs.container.getBoundingClientRect(),i=s.left,t=s.top;this.touches.length===1&&r.length===1&&this.$emit("move",new ti({left:r[0].clientX-(i+this.anchor.x),top:r[0].clientY-(t+this.anchor.y)}))}},processEnd:function(){this.touches.length&&this.$emit("move-end"),this.touches=[]}},emits:["move","move-end"]};ri.render=function(e,n,r,s,i,t){return V(),te("div",{ref:"container",onTouchstart:n[1]||(n[1]=function(){return t.onTouchStart&&t.onTouchStart.apply(t,arguments)}),onMousedown:n[2]||(n[2]=function(){return t.onMouseDown&&t.onMouseDown.apply(t,arguments)})},[Ke(e.$slots,"default")],544)};function $t(e){var n,r;return{rotate:e.rotate||0,flip:{horizontal:((n=e==null?void 0:e.flip)===null||n===void 0?void 0:n.horizontal)||!1,vertical:((r=e==null?void 0:e.flip)===null||r===void 0?void 0:r.vertical)||!1}}}function Zn(e){return new Promise(function(n,r){try{if(e)if(/^data:/i.test(e))n(function(l){l=l.replace(/^data:([^;]+);base64,/gim,"");for(var d=atob(l),a=d.length,u=new ArrayBuffer(a),c=new Uint8Array(u),f=0;f<a;f++)c[f]=d.charCodeAt(f);return u}(e));else if(/^blob:/i.test(e)){var s=new FileReader;s.onload=function(l){n(l.target.result)},t=e,o=function(l){s.readAsArrayBuffer(l)},(h=new XMLHttpRequest).open("GET",t,!0),h.responseType="blob",h.onload=function(){this.status!=200&&this.status!==0||o(this.response)},h.send()}else{var i=new XMLHttpRequest;i.onreadystatechange=function(){i.readyState===4&&(i.status===200||i.status===0?n(i.response):r("Warning: could not load an image to parse its orientation"),i=null)},i.onprogress=function(){i.getResponseHeader("content-type")!=="image/jpeg"&&i.abort()},i.withCredentials=!1,i.open("GET",e,!0),i.responseType="arraybuffer",i.send(null)}else r("Error: the image is empty")}catch(l){r(l)}var t,o,h})}function Hi(e){var n=e.rotate,r=e.flip,s=e.scaleX,i=e.scaleY,t="";return t+=" rotate("+n+"deg) ",t+=" scaleX("+s*(r.horizontal?-1:1)+") ",t+=" scaleY("+i*(r.vertical?-1:1)+") "}function Gn(e){try{var n,r=new DataView(e),s=void 0,i=void 0,t=void 0,o=void 0;if(r.getUint8(0)===255&&r.getUint8(1)===216)for(var h=r.byteLength,l=2;l+1<h;){if(r.getUint8(l)===255&&r.getUint8(l+1)===225){t=l;break}l++}if(t&&(s=t+10,function(f,v,y){var S,A="";for(S=v,y+=v;S<y;S++)A+=String.fromCharCode(f.getUint8(S));return A}(r,t+4,4)==="Exif")){var d=r.getUint16(s);if(((i=d===18761)||d===19789)&&r.getUint16(s+2,i)===42){var a=r.getUint32(s+4,i);a>=8&&(o=s+a)}}if(o){for(var u=r.getUint16(o,i),c=0;c<u;c++)if(l=o+12*c+2,r.getUint16(l,i)===274){l+=8,n=r.getUint16(l,i),r.setUint16(l,1,i);break}}return n}catch{return null}}function Ri(e,n){var r=n.getBoundingClientRect(),s=r.left,i=r.top,t={left:0,top:0},o=0;return e.forEach(function(h){t.left+=(h.clientX-s)/e.length,t.top+=(h.clientY-i)/e.length}),e.forEach(function(h){o+=Oi({x:t.left,y:t.top},{x:h.clientX-s,y:h.clientY-i})}),{centerMass:t,spread:o,count:e.length}}var ki={props:{touchMove:{type:Boolean,required:!0},mouseMove:{type:Boolean,required:!0},touchResize:{type:Boolean,required:!0},wheelResize:{type:[Boolean,Object],required:!0},eventsFilter:{type:Function,required:!1}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},created:function(){this.transforming=!1,this.debouncedProcessEnd=qt(this.processEnd),this.touches=[]},methods:{processMove:function(e,n){if(this.touches.length){if(this.touches.length===1&&n.length===1)this.$emit("move",new dt({left:this.touches[0].clientX-n[0].clientX,top:this.touches[0].clientY-n[0].clientY}));else if(this.touches.length>1&&this.touchResize){var r=Ri(n,this.$refs.container),s=this.oldGeometricProperties;s.count===r.count&&s.count>1&&this.$emit("resize",new dt({left:s.centerMass.left-r.centerMass.left,top:s.centerMass.top-r.centerMass.top},{factor:s.spread/r.spread,center:r.centerMass})),this.oldGeometricProperties=r}this.touches=n}},processEnd:function(){this.transforming&&(this.transforming=!1,this.$emit("transform-end"))},processStart:function(){this.transforming=!0,this.debouncedProcessEnd.clear()},processEvent:function(e){return this.eventsFilter?this.eventsFilter(e,this.transforming)!==!1:(e.preventDefault(),e.stopPropagation(),!0)},onTouchStart:function(e){if(e.cancelable&&(this.touchMove||this.touchResize&&e.touches.length>1)&&this.processEvent(e)){var n=this.$refs.container,r=n.getBoundingClientRect(),s=r.left,i=r.top,t=r.bottom,o=r.right;this.touches=Ge(e.touches).filter(function(h){return h.clientX>s&&h.clientX<o&&h.clientY>i&&h.clientY<t}),this.oldGeometricProperties=Ri(this.touches,n)}},onTouchEnd:function(e){e.touches.length===0&&(this.touches=[],this.processEnd())},onTouchMove:function(e){var n=this;if(this.touches.length){var r=Ge(e.touches).filter(function(s){return!s.identifier||n.touches.find(function(i){return i.identifier===s.identifier})});this.processEvent(e)&&(this.processMove(e,r),this.processStart())}},onMouseDown:function(e){if(this.mouseMove&&"buttons"in e&&e.buttons===1&&this.processEvent(e)){var n={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[n],this.processStart()}},onMouseMove:function(e){this.touches.length&&this.processEvent(e)&&this.processMove(e,[{clientX:e.clientX,clientY:e.clientY}])},onMouseUp:function(){this.touches=[],this.processEnd()},onWheel:function(e){if(this.wheelResize&&this.processEvent(e)){var n=this.$refs.container.getBoundingClientRect(),r=n.left,s=n.top,i=1+this.wheelResize.ratio*(o=e.deltaY||e.detail||e.wheelDelta,(h=+o)==0||_i(h)?h:h>0?1:-1),t={left:e.clientX-r,top:e.clientY-s};this.$emit("resize",new dt({},{factor:i,center:t})),this.touches.length||this.debouncedProcessEnd()}var o,h}},emits:["resize","move","transform-end"]};ki.render=function(e,n,r,s,i,t){return V(),te("div",{ref:"container",onTouchstart:n[1]||(n[1]=function(){return t.onTouchStart&&t.onTouchStart.apply(t,arguments)}),onMousedown:n[2]||(n[2]=function(){return t.onMouseDown&&t.onMouseDown.apply(t,arguments)}),onWheel:n[3]||(n[3]=function(){return t.onWheel&&t.onWheel.apply(t,arguments)})},[Ke(e.$slots,"default")],544)};var Kt={components:{TransformableImage:ki},props:{touchMove:{type:Boolean,required:!0},mouseMove:{type:Boolean,required:!0},touchResize:{type:Boolean,required:!0},wheelResize:{type:[Boolean,Object],required:!0}},emits:["resize","move"]};Kt.render=function(e,n,r,s,i,t){var o=Se("transformable-image");return V(),te(o,{"touch-move":r.touchMove,"touch-resize":r.touchResize,"mouse-move":r.mouseMove,"wheel-resize":r.wheelResize,onMove:n[1]||(n[1]=function(h){return e.$emit("move",h)}),onResize:n[2]||(n[2]=function(h){return e.$emit("resize",h)})},{default:ee(function(){return[Ke(e.$slots,"default")]}),_:3},8,["touch-move","touch-resize","mouse-move","wheel-resize"])};var yt=Ee("vue-preview"),ji={props:{coordinates:{type:Object},transitions:{type:Object},image:{type:Object,default:function(){return{}}},imageClass:{type:String},width:{type:Number},height:{type:Number},fill:{type:Boolean}},data:function(){return{calculatedImageSize:{width:0,height:0},calculatedSize:{width:0,height:0}}},computed:{classes:function(){return{root:yt({fill:this.fill}),wrapper:yt("wrapper"),imageWrapper:yt("image-wrapper"),image:se(yt("image"),this.imageClass)}},style:function(){if(this.fill)return{};var e={};return this.width&&(e.width="".concat(this.size.width,"px")),this.height&&(e.height="".concat(this.size.height,"px")),this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),e},wrapperStyle:function(){var e={width:"".concat(this.size.width,"px"),height:"".concat(this.size.height,"px"),left:"calc(50% - ".concat(this.size.width/2,"px)"),top:"calc(50% - ".concat(this.size.height/2,"px)")};return this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),e},imageStyle:function(){if(this.coordinates&&this.image){var e=this.coordinates.width/this.size.width,n=Y(Y({rotate:0,flip:{horizontal:!1,vertical:!1}},this.image.transforms),{},{scaleX:1/e,scaleY:1/e}),r=this.imageSize.width,s=this.imageSize.height,i=Wi({width:r,height:s},n.rotate),t={width:"".concat(r,"px"),height:"".concat(s,"px"),left:"0px",top:"0px"},o={rotate:{left:(r-i.width)*n.scaleX/2,top:(s-i.height)*n.scaleY/2},scale:{left:(1-n.scaleX)*r/2,top:(1-n.scaleY)*s/2}};return t.transform=`translate(
				`.concat(-this.coordinates.left/e-o.rotate.left-o.scale.left,"px,").concat(-this.coordinates.top/e-o.rotate.top-o.scale.top,"px) ")+Hi(n),this.transitions&&this.transitions.enabled&&(t.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),t}return{}},size:function(){return{width:this.width||this.calculatedSize.width,height:this.height||this.calculatedSize.height}},imageSize:function(){return{width:this.image.width||this.calculatedImageSize.width,height:this.image.height||this.calculatedImageSize.height}}},watch:{image:function(e){(e.width||e.height)&&this.onChangeImage()}},mounted:function(){var e=this;this.onChangeImage(),this.$refs.image.addEventListener("load",function(){e.refreshImage()}),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},unmounted:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh)},methods:{refreshImage:function(){var e=this.$refs.image;this.calculatedImageSize.height=e.naturalHeight,this.calculatedImageSize.width=e.naturalWidth},refresh:function(){var e=this.$refs.root;this.width||(this.calculatedSize.width=e.clientWidth),this.height||(this.calculatedSize.height=e.clientHeight)},onChangeImage:function(){var e=this.$refs.image;e&&e.complete&&this.refreshImage(),this.refresh()}}};ji.render=function(e,n,r,s,i,t){return V(),te("div",{ref:"root",class:t.classes.root,style:t.style},[X("div",{ref:"wrapper",class:t.classes.wrapper,style:t.wrapperStyle},[ei(X("img",{ref:"image",src:r.image&&r.image.src,class:t.classes.image,style:t.imageStyle},null,14,["src"]),[[Mi,r.image&&r.image.src]])],6)],6)};var si={components:{Preview:ji},inheritAttrs:!1};si.render=function(e,n,r,s,i,t){var o=Se("preview");return V(),te(o,Si(e.$attrs,{fill:!0}),null,16)};var Nt=Ee("vue-rectangle-stencil"),Bi={name:"RectangleStencil",components:{StencilPreview:si,BoundingBox:ni,DraggableArea:ri},props:{image:{type:Object},coordinates:{type:Object},stencilCoordinates:{type:Object},handlers:{type:Object},handlersComponent:{type:[Object,String],default:function(){return Ot}},lines:{type:Object},linesComponent:{type:[Object,String],default:function(){return Ft}},aspectRatio:{type:[Number,String]},minAspectRatio:{type:[Number,String]},maxAspectRatio:{type:[Number,String]},movable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},transitions:{type:Object},movingClass:{type:String},resizingClass:{type:String},previewClass:{type:String},boundingBoxClass:{type:String},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}}},data:function(){return{moving:!1,resizing:!1}},computed:{classes:function(){return{stencil:se(Nt({movable:this.movable,moving:this.moving,resizing:this.resizing}),this.moving&&this.movingClass,this.resizing&&this.resizingClass),preview:se(Nt("preview"),this.previewClass),boundingBox:se(Nt("bounding-box"),this.boundingBoxClass)}},style:function(){var e=this.stencilCoordinates,n=e.height,r=e.width,s=e.left,i=e.top,t={width:"".concat(r,"px"),height:"".concat(n,"px"),transform:"translate(".concat(s,"px, ").concat(i,"px)")};return this.transitions&&this.transitions.enabled&&(t.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),t}},methods:{onMove:function(e){this.$emit("move",e),this.moving=!0},onMoveEnd:function(){this.$emit("move-end"),this.moving=!1},onResize:function(e){this.$emit("resize",e),this.resizing=!0},onResizeEnd:function(){this.$emit("resize-end"),this.resizing=!1},aspectRatios:function(){return{minimum:this.aspectRatio||this.minAspectRatio,maximum:this.aspectRatio||this.maxAspectRatio}}},emits:["resize","resize-end","move","move-end"]};Bi.render=function(e,n,r,s,i,t){var o=Se("stencil-preview"),h=Se("draggable-area"),l=Se("bounding-box");return V(),te("div",{class:t.classes.stencil,style:t.style},[X(l,{width:r.stencilCoordinates.width,height:r.stencilCoordinates.height,transitions:r.transitions,class:t.classes.boundingBox,handlers:r.handlers,"handlers-component":r.handlersComponent,"handlers-classes":r.handlersClasses,"handlers-wrappers-classes":r.handlersWrappersClasses,lines:r.lines,"lines-component":r.linesComponent,"lines-classes":r.linesClasses,"lines-wrappers-classes":r.linesWrappersClasses,resizable:r.resizable,onResize:t.onResize,onResizeEnd:t.onResizeEnd},{default:ee(function(){return[X(h,{movable:r.movable,onMove:t.onMove,onMoveEnd:t.onMoveEnd},{default:ee(function(){return[X(o,{image:r.image,coordinates:r.coordinates,width:r.stencilCoordinates.width,height:r.stencilCoordinates.height,class:t.classes.preview,transitions:r.transitions},null,8,["image","coordinates","width","height","class","transitions"])]}),_:1},8,["movable","onMove","onMoveEnd"])]}),_:1},8,["width","height","transitions","class","handlers","handlers-component","handlers-classes","handlers-wrappers-classes","lines","lines-component","lines-classes","lines-wrappers-classes","resizable","onResize","onResizeEnd"])],6)};var Xt=Ee("vue-circle-stencil"),$i={components:{StencilPreview:si,BoundingBox:ni,DraggableArea:ri},props:{image:{type:Object},coordinates:{type:Object},stencilCoordinates:{type:Object},handlers:{type:Object,default:function(){return{eastNorth:!0,westNorth:!0,westSouth:!0,eastSouth:!0}}},handlersComponent:{type:[Object,String],default:function(){return Ot}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}},lines:{type:Object},linesComponent:{type:[Object,String],default:function(){return Ft}},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},movable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},transitions:{type:Object},movingClass:{type:String},resizingClass:{type:String},previewClass:{type:String},boundingBoxClass:{type:String}},data:function(){return{moving:!1,resizing:!1}},computed:{classes:function(){return{stencil:se(Xt({movable:this.movable,moving:this.moving,resizing:this.resizing}),this.moving&&this.movingClass,this.resizing&&this.resizingClass),preview:se(Xt("preview"),this.previewClass),boundingBox:se(Xt("bounding-box"),this.boundingBoxClass)}},style:function(){var e=this.stencilCoordinates,n=e.height,r=e.width,s=e.left,i=e.top,t={width:"".concat(r,"px"),height:"".concat(n,"px"),transform:"translate(".concat(s,"px, ").concat(i,"px)")};return this.transitions&&this.transitions.enabled&&(t.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),t}},methods:{onMove:function(e){this.$emit("move",e),this.moving=!0},onMoveEnd:function(){this.$emit("move-end"),this.moving=!1},onResize:function(e){this.$emit("resize",e),this.resizing=!0},onResizeEnd:function(){this.$emit("resize-end"),this.resizing=!1},aspectRatios:function(){return{minimum:1,maximum:1}}},emits:["resize","resize-end","move","move-end"]};$i.render=function(e,n,r,s,i,t){var o=Se("stencil-preview"),h=Se("draggable-area"),l=Se("bounding-box");return V(),te("div",{class:t.classes.stencil,style:t.style},[X(l,{width:r.stencilCoordinates.width,height:r.stencilCoordinates.height,transitions:r.transitions,class:t.classes.boundingBox,handlers:r.handlers,"handlers-component":r.handlersComponent,"handlers-classes":r.handlersClasses,"handlers-wrappers-classes":r.handlersWrappersClasses,lines:r.lines,"lines-component":r.linesComponent,"lines-classes":r.linesClasses,"lines-wrappers-classes":r.linesWrappersClasses,resizable:r.resizable,onResize:t.onResize,onResizeEnd:t.onResizeEnd},{default:ee(function(){return[X(h,{movable:r.movable,onMove:t.onMove,onMoveEnd:t.onMoveEnd},{default:ee(function(){return[X(o,{image:r.image,coordinates:r.coordinates,width:r.stencilCoordinates.width,height:r.stencilCoordinates.height,class:t.classes.preview,transitions:r.transitions},null,8,["image","coordinates","width","height","class","transitions"])]}),_:1},8,["movable","onMove","onMoveEnd"])]}),_:1},8,["width","height","transitions","class","handlers","handlers-component","handlers-classes","handlers-wrappers-classes","lines","lines-component","lines-classes","lines-wrappers-classes","resizable","onResize","onResizeEnd"])],6)};var Kn=["transitions"],Le=Ee("vue-advanced-cropper"),Ni={name:"Cropper",components:{BackgroundWrapper:Kt},props:{src:{type:String,default:null},stencilComponent:{type:[Object,String],default:function(){return Bi}},backgroundWrapperComponent:{type:[Object,String],default:function(){return Kt}},stencilProps:{type:Object,default:function(){return{}}},autoZoom:{type:Boolean,default:!1},imageClass:{type:String},boundariesClass:{type:String},backgroundClass:{type:String},foregroundClass:{type:String},minWidth:{type:[Number,String]},minHeight:{type:[Number,String]},maxWidth:{type:[Number,String]},maxHeight:{type:[Number,String]},debounce:{type:[Boolean,Number],default:500},transitions:{type:Boolean,default:!0},checkOrientation:{type:Boolean,default:!0},canvas:{type:[Object,Boolean],default:!0},crossOrigin:{type:[Boolean,String],default:void 0},transitionTime:{type:Number,default:300},imageRestriction:{type:String,default:"fit-area",validator:function(e){return Tn.indexOf(e)!==-1}},roundResult:{type:Boolean,default:!0},defaultSize:{type:[Function,Object]},defaultPosition:{type:[Function,Object]},defaultVisibleArea:{type:[Function,Object]},defaultTransforms:{type:[Function,Object]},defaultBoundaries:{type:[Function,String],validator:function(e){return!(typeof e=="string"&&e!=="fill"&&e!=="fit")}},priority:{type:String,default:"coordinates"},stencilSize:{type:[Object,Function]},resizeImage:{type:[Boolean,Object],default:!0},moveImage:{type:[Boolean,Object],default:!0},autoZoomAlgorithm:{type:Function},resizeAlgorithm:{type:Function,default:function(e){var n=e.event,r=e.coordinates,s=e.aspectRatio,i=e.positionRestrictions,t=e.sizeRestrictions,o=j(j({},r),{right:r.left+r.width,bottom:r.top+r.height}),h=n.params||{},l=j({},n.directions),d=h.allowedDirections||{left:!0,right:!0,bottom:!0,top:!0};t.widthFrozen&&(l.left=0,l.right=0),t.heightFrozen&&(l.top=0,l.bottom=0),De.forEach(function(E){d[E]||(l[E]=0)});var a=Oe(o,l=zi({coordinates:o,directions:l,sizeRestrictions:t,positionRestrictions:i})).width,u=Oe(o,l).height,c=h.preserveRatio?Q(o):jt(a/u,s);if(c){var f=h.respectDirection;if(f||(f=o.width>=o.height||c===1?"width":"height"),f==="width"){var v=a/c-o.height;if(d.top&&d.bottom){var y=l.top,S=l.bottom;l.bottom=wt(v,S,y),l.top=wt(v,y,S)}else d.bottom?l.bottom=v:d.top?l.top=v:d.right?l.right=0:d.left&&(l.left=0)}else if(f==="height"){var A=o.width-u*c;if(d.left&&d.right){var O=l.left,U=l.right;l.left=-wt(A,O,U),l.right=-wt(A,U,O)}else d.left?l.left=-A:d.right?l.right=-A:d.top?l.top=0:d.bottom&&(l.bottom=0)}l=zi({directions:l,coordinates:o,sizeRestrictions:t,positionRestrictions:i,preserveRatio:!0,compensate:h.compensate})}return a=Oe(o,l).width,u=Oe(o,l).height,(c=h.preserveRatio?Q(o):jt(a/u,s))&&Math.abs(c-a/u)>.001&&De.forEach(function(E){d[E]||(l[E]=0)}),Gt({event:new ti({left:-l.left,top:-l.top}),coordinates:{width:r.width+l.right+l.left,height:r.height+l.top+l.bottom,left:r.left,top:r.top},positionRestrictions:i})}},moveAlgorithm:{type:Function,default:Gt},initStretcher:{type:Function,default:function(e){var n=e.stretcher,r=e.imageSize,s=Q(r);n.style.width=r.width+"px",n.style.height=n.clientWidth/s+"px",n.style.width=n.clientWidth+"px"}},fitCoordinates:{type:Function,default:function(e){var n=e.visibleArea,r=e.coordinates,s=e.aspectRatio,i=e.sizeRestrictions,t=e.positionRestrictions,o=j(j({},r),He({width:r.width,height:r.height,aspectRatio:s,sizeRestrictions:{maxWidth:n.width,maxHeight:n.height,minHeight:Math.min(n.height,i.minHeight),minWidth:Math.min(n.width,i.minWidth)}}));return o=me(o=Ae(o,nt(de(r),de(o))),_t(Pe(n),t))}},fitVisibleArea:{type:Function,default:function(e){var n=e.visibleArea,r=e.boundaries,s=e.getAreaRestrictions,i=e.coordinates,t=j({},n);t.height=t.width/Q(r),t.top+=(n.height-t.height)/2,(i.height-t.height>0||i.width-t.width>0)&&(t=Ce(t,Math.max(i.height/t.height,i.width/t.width)));var o=Tt(st(i,Pe(t=Ce(t,Ut(t,s({visibleArea:t,type:"resize"}))))));return t.width<i.width&&(o.left=0),t.height<i.height&&(o.top=0),t=me(t=Ae(t,o),s({visibleArea:t,type:"move"}))}},areaRestrictionsAlgorithm:{type:Function,default:function(e){var n=e.visibleArea,r=e.boundaries,s=e.imageSize,i=e.imageRestriction,t=e.type,o={};return i==="fill-area"?o={left:0,top:0,right:s.width,bottom:s.height}:i==="fit-area"&&(Q(r)>Q(s)?(o={top:0,bottom:s.height},n&&t==="move"&&(n.width>s.width?(o.left=-(n.width-s.width)/2,o.right=s.width-o.left):(o.left=0,o.right=s.width))):(o={left:0,right:s.width},n&&t==="move"&&(n.height>s.height?(o.top=-(n.height-s.height)/2,o.bottom=s.height-o.top):(o.top=0,o.bottom=s.height)))),o}},sizeRestrictionsAlgorithm:{type:Function,default:function(e){return{minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight}}},positionRestrictionsAlgorithm:{type:Function,default:function(e){var n=e.imageSize,r={};return e.imageRestriction!=="none"&&(r={left:0,top:0,right:n.width,bottom:n.height}),r}}},data:function(){return{transitionsActive:!1,imageLoaded:!1,imageAttributes:{width:null,height:null,crossOrigin:null,src:null},defaultImageTransforms:{rotate:0,flip:{horizontal:!1,vertical:!1}},appliedImageTransforms:{rotate:0,flip:{horizontal:!1,vertical:!1}},boundaries:{width:0,height:0},visibleArea:null,coordinates:Y({},bi)}},computed:{image:function(){return{src:this.imageAttributes.src,width:this.imageAttributes.width,height:this.imageAttributes.height,transforms:this.imageTransforms}},imageTransforms:function(){return{rotate:this.appliedImageTransforms.rotate,flip:{horizontal:this.appliedImageTransforms.flip.horizontal,vertical:this.appliedImageTransforms.flip.vertical},translateX:this.visibleArea?this.visibleArea.left/this.coefficient:0,translateY:this.visibleArea?this.visibleArea.top/this.coefficient:0,scaleX:1/this.coefficient,scaleY:1/this.coefficient}},imageSize:function(){var e=function(n){return n*Math.PI/180}(this.imageTransforms.rotate);return{width:Math.abs(this.imageAttributes.width*Math.cos(e))+Math.abs(this.imageAttributes.height*Math.sin(e)),height:Math.abs(this.imageAttributes.width*Math.sin(e))+Math.abs(this.imageAttributes.height*Math.cos(e))}},initialized:function(){return!!(this.visibleArea&&this.imageLoaded)},settings:function(){var e=Vt(this.resizeImage,{touch:!0,wheel:{ratio:.1},adjustStencil:!0},{touch:!1,wheel:!1,adjustStencil:!1});return{moveImage:Vt(this.moveImage,{touch:!0,mouse:!0},{touch:!1,mouse:!1}),resizeImage:e}},coefficient:function(){return this.visibleArea?this.visibleArea.width/this.boundaries.width:0},areaRestrictions:function(){return this.imageLoaded?this.areaRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction,boundaries:this.boundaries}):{}},transitionsOptions:function(){return{enabled:this.transitionsActive,timingFunction:"ease-in-out",time:350}},sizeRestrictions:function(){if(this.boundaries.width&&this.boundaries.height&&this.imageSize.width&&this.imageSize.height){var e=this.sizeRestrictionsAlgorithm({imageSize:this.imageSize,minWidth:ue(this.minWidth)?0:vt(this.minWidth),minHeight:ue(this.minHeight)?0:vt(this.minHeight),maxWidth:ue(this.maxWidth)?1/0:vt(this.maxWidth),maxHeight:ue(this.maxHeight)?1/0:vt(this.maxHeight)});if(e=function(s){var i=s.areaRestrictions,t=s.sizeRestrictions,o=s.boundaries,h=s.positionRestrictions,l=j(j({},t),{minWidth:t.minWidth!==void 0?t.minWidth:0,minHeight:t.minHeight!==void 0?t.minHeight:0,maxWidth:t.maxWidth!==void 0?t.maxWidth:1/0,maxHeight:t.maxHeight!==void 0?t.maxHeight:1/0});h.left!==void 0&&h.right!==void 0&&(l.maxWidth=Math.min(l.maxWidth,h.right-h.left)),h.bottom!==void 0&&h.top!==void 0&&(l.maxHeight=Math.min(l.maxHeight,h.bottom-h.top));var d=Zt(i),a=Pi(o,d);return d.width<1/0&&(!l.maxWidth||l.maxWidth>a.width)&&(l.maxWidth=Math.min(l.maxWidth,a.width)),d.height<1/0&&(!l.maxHeight||l.maxHeight>a.height)&&(l.maxHeight=Math.min(l.maxHeight,a.height)),l.minWidth>l.maxWidth&&(l.minWidth=l.maxWidth,l.widthFrozen=!0),l.minHeight>l.maxHeight&&(l.minHeight=l.maxHeight,l.heightFrozen=!0),l}({sizeRestrictions:e,areaRestrictions:this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}),imageSize:this.imageSize,boundaries:this.boundaries,positionRestrictions:this.positionRestrictions,imageRestriction:this.imageRestriction,visibleArea:this.visibleArea,stencilSize:this.getStencilSize()}),this.visibleArea&&this.stencilSize){var n=this.getStencilSize(),r=Zt(this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}));e.maxWidth=Math.min(e.maxWidth,r.width*n.width/this.boundaries.width),e.maxHeight=Math.min(e.maxHeight,r.height*n.height/this.boundaries.height),e.maxWidth<e.minWidth&&(e.minWidth=e.maxWidth),e.maxHeight<e.minHeight&&(e.minHeight=e.maxHeight)}return e}return{minWidth:0,minHeight:0,maxWidth:0,maxHeight:0}},positionRestrictions:function(){return this.positionRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction})},classes:function(){return{cropper:Le(),image:se(Le("image"),this.imageClass),stencil:Le("stencil"),boundaries:se(Le("boundaries"),this.boundariesClass),stretcher:se(Le("stretcher")),background:se(Le("background"),this.backgroundClass),foreground:se(Le("foreground"),this.foregroundClass),imageWrapper:se(Le("image-wrapper")),cropperWrapper:se(Le("cropper-wrapper"))}},stencilCoordinates:function(){if(this.initialized){var e=this.coordinates,n=e.width,r=e.height,s=e.left,i=e.top;return{width:n/this.coefficient,height:r/this.coefficient,left:(s-this.visibleArea.left)/this.coefficient,top:(i-this.visibleArea.top)/this.coefficient}}return this.defaultCoordinates()},boundariesStyle:function(){var e={width:this.boundaries.width?"".concat(Math.round(this.boundaries.width),"px"):"auto",height:this.boundaries.height?"".concat(Math.round(this.boundaries.height),"px"):"auto",transition:"opacity ".concat(this.transitionTime,"ms"),pointerEvents:this.imageLoaded?"all":"none"};return this.imageLoaded||(e.opacity="0"),e},imageStyle:function(){var e=this.imageAttributes.width>this.imageAttributes.height?{width:Math.min(1024,this.imageAttributes.width),height:Math.min(1024,this.imageAttributes.width)/(this.imageAttributes.width/this.imageAttributes.height)}:{height:Math.min(1024,this.imageAttributes.height),width:Math.min(1024,this.imageAttributes.height)*(this.imageAttributes.width/this.imageAttributes.height)},n={left:(e.width-this.imageSize.width)/(2*this.coefficient),top:(e.height-this.imageSize.height)/(2*this.coefficient)},r={left:(1-1/this.coefficient)*e.width/2,top:(1-1/this.coefficient)*e.height/2},s=Y(Y({},this.imageTransforms),{},{scaleX:this.imageTransforms.scaleX*(this.imageAttributes.width/e.width),scaleY:this.imageTransforms.scaleY*(this.imageAttributes.height/e.height)}),i={width:"".concat(e.width,"px"),height:"".concat(e.height,"px"),left:"0px",top:"0px",transform:"translate(".concat(-n.left-r.left-this.imageTransforms.translateX,"px, ").concat(-n.top-r.top-this.imageTransforms.translateY,"px)")+Hi(s)};return this.transitionsOptions.enabled&&(i.transition="".concat(this.transitionsOptions.time,"ms ").concat(this.transitionsOptions.timingFunction)),i}},watch:{src:function(){this.onChangeImage()},stencilComponent:function(){var e=this;this.$nextTick(function(){e.resetCoordinates(),e.runAutoZoom("setCoordinates"),e.onChange()})},minWidth:function(){this.onPropsChange()},maxWidth:function(){this.onPropsChange()},minHeight:function(){this.onPropsChange()},maxHeight:function(){this.onPropsChange()},imageRestriction:function(){this.reset()},stencilProps:function(e,n){["aspectRatio","minAspectRatio","maxAspectRatio"].find(function(r){return e[r]!==n[r]})&&this.$nextTick(this.onPropsChange)}},created:function(){this.debouncedUpdate=qt(this.update,this.debounce),this.debouncedDisableTransitions=qt(this.disableTransitions,this.transitionsOptions.time),this.awaiting=!1},mounted:function(){this.$refs.image.addEventListener("load",this.onSuccessLoadImage),this.$refs.image.addEventListener("error",this.onFailLoadImage),this.onChangeImage(),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},unmounted:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh),this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src),this.debouncedUpdate.clear(),this.debouncedDisableTransitions.clear()},methods:{getResult:function(){var e=this.initialized?this.prepareResult(Y({},this.coordinates)):this.defaultCoordinates(),n={rotate:this.imageTransforms.rotate%360,flip:Y({},this.imageTransforms.flip)};if(this.src&&this.imageLoaded){var r=this;return{image:this.image,coordinates:e,visibleArea:this.visibleArea?Y({},this.visibleArea):null,imageTransforms:n,get canvas(){return r.canvas?r.getCanvas():void 0}}}return{image:this.image,coordinates:e,visibleArea:this.visibleArea?Y({},this.visibleArea):null,canvas:void 0,imageTransforms:n}},zoom:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=r.transitions,i=s===void 0||s;this.onManipulateImage(new dt({},{factor:1/e,center:n}),{normalize:!1,transitions:i})},move:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=r.transitions,i=s===void 0||s;this.onManipulateImage(new dt({left:e||0,top:n||0}),{normalize:!1,transitions:i})},setCoordinates:function(e){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.autoZoom,i=s===void 0||s,t=r.transitions,o=t===void 0||t;this.$nextTick(function(){n.imageLoaded?(n.transitionsActive||(o&&n.enableTransitions(),n.coordinates=n.applyTransform(e),i&&n.runAutoZoom("setCoordinates"),o&&n.debouncedDisableTransitions()),n.onChange()):n.delayedTransforms=e})},refresh:function(){var e=this,n=this.$refs.image;if(this.src&&n)return this.initialized?this.updateVisibleArea().then(function(){e.onChange()}):this.resetVisibleArea().then(function(){e.onChange()})},reset:function(){var e=this;return this.resetVisibleArea().then(function(){e.onChange(!1)})},awaitRender:function(e){var n=this;this.awaiting||(this.awaiting=!0,this.$nextTick(function(){e(),n.awaiting=!1}))},prepareResult:function(e){return this.roundResult?function(n){var r=n.coordinates,s=n.sizeRestrictions,i=n.positionRestrictions,t={width:Math.round(r.width),height:Math.round(r.height),left:Math.round(r.left),top:Math.round(r.top)};return t.width>s.maxWidth?t.width=Math.floor(r.width):t.width<s.minWidth&&(t.width=Math.ceil(r.width)),t.height>s.maxHeight?t.height=Math.floor(r.height):t.height<s.minHeight&&(t.height=Math.ceil(r.height)),me(t,i)}(Y(Y({},this.getPublicProperties()),{},{positionRestrictions:bt(this.positionRestrictions,this.visibleArea),coordinates:e})):e},processAutoZoom:function(e,n,r,s){var i=this.autoZoomAlgorithm;i||(i=this.stencilSize?On:this.autoZoom?Fn:Dn);var t=i({event:{type:e,params:s},visibleArea:n,coordinates:r,boundaries:this.boundaries,aspectRatio:this.getAspectRatio(),positionRestrictions:this.positionRestrictions,getAreaRestrictions:this.getAreaRestrictions,sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize()});return Y(Y({},t),{},{changed:!wi(t.visibleArea,n)||!wi(t.coordinates,r)})},runAutoZoom:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.transitions,s=r!==void 0&&r,i=zn(n,Kn),t=this.processAutoZoom(e,this.visibleArea,this.coordinates,i),o=t.visibleArea,h=t.coordinates,l=t.changed;s&&l&&this.enableTransitions(),this.visibleArea=o,this.coordinates=h,s&&l&&this.debouncedDisableTransitions()},normalizeEvent:function(e){return function(n){var r=n.event,s=n.visibleArea,i=n.coefficient;if(r.type==="manipulateImage")return j(j({},r),{move:{left:r.move&&r.move.left?i*r.move.left:0,top:r.move&&r.move.top?i*r.move.top:0},scale:{factor:r.scale&&r.scale.factor?r.scale.factor:1,center:r.scale&&r.scale.center?{left:r.scale.center.left*i+s.left,top:r.scale.center.top*i+s.top}:null}});if(r.type==="resize"){var t=j(j({},r),{directions:j({},r.directions)});return De.forEach(function(h){t.directions[h]*=i}),t}if(r.type==="move"){var o=j(j({},r),{directions:j({},r.directions)});return In.forEach(function(h){o.directions[h]*=i}),o}return r}(Y(Y({},this.getPublicProperties()),{},{event:e}))},getCanvas:function(){if(this.$refs.canvas){var e=this.$refs.canvas,n=this.$refs.image,r=this.imageTransforms.rotate!==0||this.imageTransforms.flip.horizontal||this.imageTransforms.flip.vertical?function(h,l,d){var a=d.rotate,u=d.flip,c={width:l.naturalWidth,height:l.naturalHeight},f=Wi(c,a),v=h.getContext("2d");h.height=f.height,h.width=f.width,v.save();var y=Ne(de(j({left:0,top:0},c)),a);return v.translate(-(y.left-f.width/2),-(y.top-f.height/2)),v.rotate(a*Math.PI/180),v.translate(u.horizontal?c.width:0,u.vertical?c.height:0),v.scale(u.horizontal?-1:1,u.vertical?-1:1),v.drawImage(l,0,0,c.width,c.height),v.restore(),h}(this.$refs.sourceCanvas,n,this.imageTransforms):n,s=Y({minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,maxArea:this.maxCanvasSize,imageSmoothingEnabled:!0,imageSmoothingQuality:"high",fillColor:"transparent"},this.canvas),i=function(h){return h.find(function(l){return d=l,!Number.isNaN(parseFloat(d))&&isFinite(d);var d})},t=He({sizeRestrictions:{minWidth:i([s.width,s.minWidth])||0,minHeight:i([s.height,s.minHeight])||0,maxWidth:i([s.width,s.maxWidth])||1/0,maxHeight:i([s.height,s.maxHeight])||1/0},width:this.coordinates.width,height:this.coordinates.height,aspectRatio:{minimum:this.coordinates.width/this.coordinates.height,maximum:this.coordinates.width/this.coordinates.height}});if(s.maxArea&&t.width*t.height>s.maxArea){var o=Math.sqrt(s.maxArea/(t.width*t.height));t={width:Math.round(o*t.width),height:Math.round(o*t.height)}}return function(h,l,d,a,u){h.width=a?a.width:d.width,h.height=a?a.height:d.height;var c=h.getContext("2d");c.clearRect(0,0,h.width,h.height),u&&(u.imageSmoothingEnabled&&(c.imageSmoothingEnabled=u.imageSmoothingEnabled),u.imageSmoothingQuality&&(c.imageSmoothingQuality=u.imageSmoothingQuality),u.fillColor&&(c.fillStyle=u.fillColor,c.fillRect(0,0,h.width,h.height),c.save()));var f=d.left<0?-d.left:0,v=d.top<0?-d.top:0;c.drawImage(l,d.left+f,d.top+v,d.width,d.height,f*(h.width/d.width),v*(h.height/d.height),h.width,h.height)}(e,r,this.coordinates,t,s),e}},update:function(){this.$emit("change",this.getResult())},applyTransform:function(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1],r=this.visibleArea&&n?Un(this.sizeRestrictions,this.visibleArea):this.sizeRestrictions,s=this.visibleArea&&n?bt(this.positionRestrictions,this.visibleArea):this.positionRestrictions;return _n({transform:e,coordinates:this.coordinates,imageSize:this.imageSize,sizeRestrictions:r,positionRestrictions:s,aspectRatio:this.getAspectRatio(),visibleArea:this.visibleArea})},resetCoordinates:function(){var e=this;if(this.$refs.image){this.$refs.cropper,this.$refs.image;var n=this.defaultSize;n||(n=this.stencilSize?Ln:Wn);var r=this.sizeRestrictions;r.minWidth,r.minHeight,r.maxWidth,r.maxHeight;var s=tt(n)?n({boundaries:this.boundaries,imageSize:this.imageSize,aspectRatio:this.getAspectRatio(),sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize(),visibleArea:this.visibleArea}):n,i=this.defaultPosition||Pn,t=[s,function(o){var h=o.coordinates;return Y({},tt(i)?i({coordinates:h,imageSize:e.imageSize,visibleArea:e.visibleArea}):e.defaultPosition)}];this.delayedTransforms&&t.push.apply(t,Ge(Array.isArray(this.delayedTransforms)?this.delayedTransforms:[this.delayedTransforms])),this.coordinates=this.applyTransform(t,!0),this.delayedTransforms=null}},clearImage:function(){var e=this;this.imageLoaded=!1,setTimeout(function(){var n=e.$refs.stretcher;n&&(n.style.height="auto",n.style.width="auto"),e.coordinates=e.defaultCoordinates(),e.boundaries={width:0,height:0}},this.transitionTime)},enableTransitions:function(){this.transitions&&(this.transitionsActive=!0)},disableTransitions:function(){this.transitionsActive=!1},updateBoundaries:function(){var e=this,n=this.$refs.stretcher,r=this.$refs.cropper;return this.initStretcher({cropper:r,stretcher:n,imageSize:this.imageSize}),this.$nextTick().then(function(){var s={cropper:r,imageSize:e.imageSize};if(tt(e.defaultBoundaries)?e.boundaries=e.defaultBoundaries(s):e.defaultBoundaries==="fit"?e.boundaries=function(i){var t=i.cropper,o=i.imageSize,h=t.clientHeight,l=t.clientWidth,d=h,a=o.width*h/o.height;return a>l&&(a=l,d=o.height*l/o.width),{width:a,height:d}}(s):e.boundaries=function(i){var t=i.cropper;return{width:t.clientWidth,height:t.clientHeight}}(s),!e.boundaries.width||!e.boundaries.height)throw new Error("It's impossible to fit the cropper in the current container")})},resetVisibleArea:function(){var e=this;return this.appliedImageTransforms=Y(Y({},this.defaultImageTransforms),{},{flip:Y({},this.defaultImageTransforms.flip)}),this.updateBoundaries().then(function(){e.priority!=="visible-area"&&(e.visibleArea=null,e.resetCoordinates());var n,r,s,i,t,o,h=e.defaultVisibleArea||Hn;e.visibleArea=tt(h)?h({imageSize:e.imageSize,boundaries:e.boundaries,coordinates:e.priority!=="visible-area"?e.coordinates:null,getAreaRestrictions:e.getAreaRestrictions,stencilSize:e.getStencilSize()}):e.defaultVisibleArea,e.visibleArea=(n={visibleArea:e.visibleArea,boundaries:e.boundaries,getAreaRestrictions:e.getAreaRestrictions},r=n.visibleArea,s=n.boundaries,i=n.getAreaRestrictions,t=j({},r),o=Q(s),t.width/t.height!==o&&(t.height=t.width/o),me(t,i({visibleArea:t,type:"move"}))),e.priority==="visible-area"?e.resetCoordinates():e.coordinates=e.fitCoordinates({visibleArea:e.visibleArea,coordinates:e.coordinates,aspectRatio:e.getAspectRatio(),positionRestrictions:e.positionRestrictions,sizeRestrictions:e.sizeRestrictions}),e.runAutoZoom("resetVisibleArea")}).catch(function(){e.visibleArea=null})},updateVisibleArea:function(){var e=this;return this.updateBoundaries().then(function(){e.visibleArea=e.fitVisibleArea({imageSize:e.imageSize,boundaries:e.boundaries,visibleArea:e.visibleArea,coordinates:e.coordinates,getAreaRestrictions:e.getAreaRestrictions}),e.coordinates=e.fitCoordinates({visibleArea:e.visibleArea,coordinates:e.coordinates,aspectRatio:e.getAspectRatio(),positionRestrictions:e.positionRestrictions,sizeRestrictions:e.sizeRestrictions}),e.runAutoZoom("updateVisibleArea")}).catch(function(){e.visibleArea=null})},onChange:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];e&&this.debounce?this.debouncedUpdate():this.update()},onChangeImage:function(){var e,n=this;if(this.imageLoaded=!1,this.delayedTransforms=null,this.src){if(function(i){if(pi(i))return!1;var t=window.location,o=/(\w+:)?(?:\/\/)([\w.-]+)?(?::(\d+))?\/?/.exec(i)||[],h={protocol:o[1]||"",host:o[2]||"",port:o[3]||""},l=function(d){return d.port||((d.protocol||t.protocol)==="http"?80:433)};return!(!h.protocol&&!h.host&&!h.port||h.protocol&&h.protocol==t.protocol&&h.host&&h.host==t.host&&h.host&&l(h)==l(t))}(this.src)){var r=ue(this.crossOrigin)?this.canvas:this.crossOrigin;r===!0&&(r="anonymous"),this.imageAttributes.crossOrigin=r||null}if(this.checkOrientation){var s=(e=this.src,new Promise(function(i){Zn(e).then(function(t){var o=Gn(t);i(t?{source:e,arrayBuffer:t,orientation:o}:{source:e,arrayBuffer:null,orientation:null})}).catch(function(t){console.warn(t),i({source:e,arrayBuffer:null,orientation:null})})}));setTimeout(function(){s.then(n.onParseImage)},this.transitionTime)}else setTimeout(function(){n.onParseImage({source:n.src})},this.transitionTime)}else this.clearImage()},onFailLoadImage:function(){this.imageAttributes.src&&(this.clearImage(),this.$emit("error"))},onSuccessLoadImage:function(){var e=this,n=this.$refs.image;n&&!this.imageLoaded&&(this.imageAttributes.height=n.naturalHeight,this.imageAttributes.width=n.naturalWidth,this.imageLoaded=!0,this.resetVisibleArea().then(function(){e.$emit("ready"),e.onChange(!1)}))},onParseImage:function(e){var n=this,r=e.source,s=e.arrayBuffer,i=e.orientation;this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src),this.imageAttributes.revoke=!1,s&&i&&i>1?Ui(r)||!pi(r)?(this.imageAttributes.src=URL.createObjectURL(new Blob([s])),this.imageAttributes.revoke=!0):this.imageAttributes.src=function(t){for(var o=[],h=new Uint8Array(t);h.length>0;){var l=h.subarray(0,8192);o.push(String.fromCharCode.apply(null,Array.from?Array.from(l):l.slice())),h=h.subarray(8192)}return"data:image/jpeg;base64,"+btoa(o.join(""))}(s):this.imageAttributes.src=r,tt(this.defaultTransforms)?this.appliedImageTransforms=$t(this.defaultTransforms()):zt(this.defaultTransforms)?this.appliedImageTransforms=$t(this.defaultTransforms):this.appliedImageTransforms=function(t){var o=$t({});if(t)switch(t){case 2:o.flip.horizontal=!0;break;case 3:o.rotate=-180;break;case 4:o.flip.vertical=!0;break;case 5:o.rotate=90,o.flip.vertical=!0;break;case 6:o.rotate=90;break;case 7:o.rotate=90,o.flip.horizontal=!0;break;case 8:o.rotate=-90}return o}(i),this.defaultImageTransforms=Y(Y({},this.appliedImageTransforms),{},{flip:Y({},this.appliedImageTransforms.flip)}),this.$nextTick(function(){var t=n.$refs.image;t&&t.complete&&(function(o){return!!o.naturalWidth}(t)?n.onSuccessLoadImage():n.onFailLoadImage())})},onResizeEnd:function(){this.runAutoZoom("resize",{transitions:!0})},onMoveEnd:function(){this.runAutoZoom("move",{transitions:!0})},onMove:function(e){var n=this;this.transitionsOptions.enabled||this.awaitRender(function(){n.coordinates=n.moveAlgorithm(Y(Y({},n.getPublicProperties()),{},{positionRestrictions:bt(n.positionRestrictions,n.visibleArea),coordinates:n.coordinates,event:n.normalizeEvent(e)})),n.onChange()})},onResize:function(e){var n=this;this.transitionsOptions.enabled||this.stencilSize&&!this.autoZoom||this.awaitRender(function(){var r=n.sizeRestrictions,s=Math.min(n.coordinates.width,n.coordinates.height,20*n.coefficient);n.coordinates=n.resizeAlgorithm(Y(Y({},n.getPublicProperties()),{},{positionRestrictions:bt(n.positionRestrictions,n.visibleArea),sizeRestrictions:{maxWidth:Math.min(r.maxWidth,n.visibleArea.width),maxHeight:Math.min(r.maxHeight,n.visibleArea.height),minWidth:Math.max(r.minWidth,s),minHeight:Math.max(r.minHeight,s)},event:n.normalizeEvent(e)})),n.onChange(),n.ticking=!1})},onManipulateImage:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.transitionsOptions.enabled){var r=n.transitions,s=r!==void 0&&r,i=n.normalize,t=i===void 0||i;s&&this.enableTransitions();var o=kn(Y(Y({},this.getPublicProperties()),{},{event:t?this.normalizeEvent(e):e,getAreaRestrictions:this.getAreaRestrictions,imageRestriction:this.imageRestriction,adjustStencil:!this.stencilSize&&this.settings.resizeImage.adjustStencil})),h=o.visibleArea,l=o.coordinates;this.visibleArea=h,this.coordinates=l,this.runAutoZoom("manipulateImage"),this.onChange(),s&&this.debouncedDisableTransitions()}},onPropsChange:function(){this.coordinates=this.applyTransform(this.coordinates,!0),this.onChange(!1)},getAreaRestrictions:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.visibleArea,r=e.type,s=r===void 0?"move":r;return this.areaRestrictionsAlgorithm({boundaries:this.boundaries,imageSize:this.imageSize,imageRestriction:this.imageRestriction,visibleArea:n,type:s})},getAspectRatio:function(e){var n,r,s=this.stencilProps,i=s.aspectRatio,t=s.minAspectRatio,o=s.maxAspectRatio;if(this.$refs.stencil&&this.$refs.stencil.aspectRatios){var h=this.$refs.stencil.aspectRatios();n=h.minimum,r=h.maximum}if(ue(n)&&(n=ue(i)?t:i),ue(r)&&(r=ue(i)?o:i),!e&&(ue(n)||ue(r))){var l=this.getStencilSize(),d=l?Q(l):null;ue(n)&&(n=vi(d)?d:void 0),ue(r)&&(r=vi(d)?d:void 0)}return{minimum:n,maximum:r}},getStencilSize:function(){if(this.stencilSize)return e={currentStencilSize:{width:this.stencilCoordinates.width,height:this.stencilCoordinates.height},stencilSize:this.stencilSize,boundaries:this.boundaries,coefficient:this.coefficient,coordinates:this.coordinates,aspectRatio:this.getAspectRatio(!0)},n=e.boundaries,r=e.stencilSize,s=e.aspectRatio,jt(Q(i=tt(r)?r({boundaries:n,aspectRatio:s}):r),s)&&(i=He({sizeRestrictions:{maxWidth:n.width,maxHeight:n.height,minWidth:0,minHeight:0},width:i.width,height:i.height,aspectRatio:{minimum:s.minimum,maximum:s.maximum}})),(i.width>n.width||i.height>n.height)&&(i=He({sizeRestrictions:{maxWidth:n.width,maxHeight:n.height,minWidth:0,minHeight:0},width:i.width,height:i.height,aspectRatio:{minimum:Q(i),maximum:Q(i)}})),i;var e,n,r,s,i},getPublicProperties:function(){return{coefficient:this.coefficient,visibleArea:this.visibleArea,coordinates:this.coordinates,boundaries:this.boundaries,sizeRestrictions:this.sizeRestrictions,positionRestrictions:this.positionRestrictions,aspectRatio:this.getAspectRatio(),imageRestriction:this.imageRestriction}},defaultCoordinates:function(){return Y({},bi)},flip:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=r.transitions,i=s===void 0||s;if(!this.transitionsActive){i&&this.enableTransitions();var t=Y({},this.imageTransforms.flip),o=Bn({flip:{horizontal:e?!t.horizontal:t.horizontal,vertical:n?!t.vertical:t.vertical},previousFlip:t,rotate:this.imageTransforms.rotate,visibleArea:this.visibleArea,coordinates:this.coordinates,imageSize:this.imageSize,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),h=o.visibleArea,l=o.coordinates;e&&(this.appliedImageTransforms.flip.horizontal=!this.appliedImageTransforms.flip.horizontal),n&&(this.appliedImageTransforms.flip.vertical=!this.appliedImageTransforms.flip.vertical),this.visibleArea=h,this.coordinates=l,this.onChange(),i&&this.debouncedDisableTransitions()}},rotate:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.transitions,s=r===void 0||r;if(!this.transitionsActive){s&&this.enableTransitions();var i=Y({},this.imageSize);this.appliedImageTransforms.rotate+=e;var t=jn({visibleArea:this.visibleArea,coordinates:this.coordinates,previousImageSize:i,imageSize:this.imageSize,angle:e,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),o=t.visibleArea,h=t.coordinates,l=this.processAutoZoom("rotateImage",o,h);o=l.visibleArea,h=l.coordinates,this.visibleArea=o,this.coordinates=h,this.onChange(),s&&this.debouncedDisableTransitions()}}},emits:["change","error","ready"]},Jn={key:0,ref:"canvas",style:{display:"none"}},er={key:1,ref:"sourceCanvas",style:{display:"none"}};Ni.render=function(e,n,r,s,i,t){return V(),te("div",{ref:"cropper",class:t.classes.cropper},[X("div",{ref:"stretcher",class:t.classes.stretcher},null,2),X("div",{class:t.classes.boundaries,style:t.boundariesStyle},[(V(),te(xt(r.backgroundWrapperComponent),{class:t.classes.cropperWrapper,"wheel-resize":t.settings.resizeImage.wheel,"touch-resize":t.settings.resizeImage.touch,"touch-move":t.settings.moveImage.touch,"mouse-move":t.settings.moveImage.mouse,onMove:t.onManipulateImage,onResize:t.onManipulateImage},{default:ee(function(){return[X("div",{class:t.classes.background,style:t.boundariesStyle},null,6),X("div",{class:t.classes.imageWrapper},[X("img",{ref:"image",crossorigin:i.imageAttributes.crossOrigin,src:i.imageAttributes.src,class:t.classes.image,style:t.imageStyle,onMousedown:n[1]||(n[1]=hn(function(){},["prevent"]))},null,46,["crossorigin","src"])],2),X("div",{class:t.classes.foreground,style:t.boundariesStyle},null,6),ei((V(),te(xt(r.stencilComponent),Si({ref:"stencil",image:t.image,coordinates:i.coordinates,"stencil-coordinates":t.stencilCoordinates,transitions:t.transitionsOptions},r.stencilProps,{onResize:t.onResize,onResizeEnd:t.onResizeEnd,onMove:t.onMove,onMoveEnd:t.onMoveEnd}),null,16,["image","coordinates","stencil-coordinates","transitions","onResize","onResizeEnd","onMove","onMoveEnd"])),[[Mi,i.imageLoaded]]),r.canvas?(V(),te("canvas",Jn,null,512)):Mt("",!0),r.canvas?(V(),te("canvas",er,null,512)):Mt("",!0)]}),_:1},8,["class","wheel-resize","touch-resize","touch-move","mouse-move","onMove","onResize"]))],6)],2)};function tr(e){const n=$e(null),r=$e(null),s=$e(null),i=(e==null?void 0:e.maxSizeMB)??5,t=(e==null?void 0:e.allowedTypes)??["image/jpeg","image/png","image/jpg","image/gif","image/webp"];return{fileInput:n,previewUrl:r,selectedFile:s,triggerFileInput:()=>{var d;(d=n.value)==null||d.click()},handleFileChange:d=>{var a;try{const c=(a=d.target.files)==null?void 0:a[0];if(r.value=null,s.value=null,!c)return;if(!t.includes(c.type))throw new ft("Unsupported file type"," Please select a JPG, PNG, GIF, or WEBP image.");if(c.size/(1024*1024)>i)throw new ft("File is too large",`Max size allowed is ${i} MB.`);r.value=URL.createObjectURL(c),s.value=c,e!=null&&e.onImageUpload&&e.onImageUpload({file:c,previewUrl:r.value})}catch(u){ft.handle(u)}},clearFileInput:()=>{var d;(d=n.value)!=null&&d.value&&(n.value.value="")}}}function ir(e,n){return n.forEach(function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach(function(s){if(s!=="default"&&!(s in e)){var i=Object.getOwnPropertyDescriptor(r,s);Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:function(){return r[s]}})}})}),Object.freeze(e)}function Xi(e,n){return new Promise(function(r,s){let i;return nr(e).then(function(t){try{return i=t,r(new Blob([n.slice(0,2),i,n.slice(2)],{type:"image/jpeg"}))}catch(o){return s(o)}},s)})}const nr=e=>new Promise((n,r)=>{const s=new FileReader;s.addEventListener("load",({target:{result:i}})=>{const t=new DataView(i);let o=0;if(t.getUint16(o)!==65496)return r("not a valid JPEG");for(o+=2;;){const h=t.getUint16(o);if(h===65498)break;const l=t.getUint16(o+2);if(h===65505&&t.getUint32(o+4)===1165519206){const d=o+10;let a;switch(t.getUint16(d)){case 18761:a=!0;break;case 19789:a=!1;break;default:return r("TIFF header contains invalid endian")}if(t.getUint16(d+2,a)!==42)return r("TIFF header contains invalid version");const u=t.getUint32(d+4,a),c=d+u+2+12*t.getUint16(d+u,a);for(let f=d+u+2;f<c;f+=12)if(t.getUint16(f,a)==274){if(t.getUint16(f+2,a)!==3)return r("Orientation data type is invalid");if(t.getUint32(f+4,a)!==1)return r("Orientation data count is invalid");t.setUint16(f+8,1,a);break}return n(i.slice(o,o+2+l))}o+=2+l}return n(new Blob)}),s.readAsArrayBuffer(e)});var St={},rr={get exports(){return St},set exports(e){St=e}};(function(e){var n,r,s={};rr.exports=s,s.parse=function(i,t){for(var o=s.bin.readUshort,h=s.bin.readUint,l=0,d={},a=new Uint8Array(i),u=a.length-4;h(a,u)!=101010256;)u--;l=u,l+=4;var c=o(a,l+=4);o(a,l+=2);var f=h(a,l+=2),v=h(a,l+=4);l+=4,l=v;for(var y=0;y<c;y++){h(a,l),l+=4,l+=4,l+=4,h(a,l+=4),f=h(a,l+=4);var S=h(a,l+=4),A=o(a,l+=4),O=o(a,l+2),U=o(a,l+4);l+=6;var E=h(a,l+=8);l+=4,l+=A+O+U,s._readLocal(a,E,d,f,S,t)}return d},s._readLocal=function(i,t,o,h,l,d){var a=s.bin.readUshort,u=s.bin.readUint;u(i,t),a(i,t+=4),a(i,t+=2);var c=a(i,t+=2);u(i,t+=2),u(i,t+=4),t+=4;var f=a(i,t+=8),v=a(i,t+=2);t+=2;var y=s.bin.readUTF8(i,t,f);if(t+=f,t+=v,d)o[y]={size:l,csize:h};else{var S=new Uint8Array(i.buffer,t);if(c==0)o[y]=new Uint8Array(S.buffer.slice(t,t+h));else{if(c!=8)throw"unknown compression method: "+c;var A=new Uint8Array(l);s.inflateRaw(S,A),o[y]=A}}},s.inflateRaw=function(i,t){return s.F.inflate(i,t)},s.inflate=function(i,t){return i[0],i[1],s.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),t)},s.deflate=function(i,t){t==null&&(t={level:6});var o=0,h=new Uint8Array(50+Math.floor(1.1*i.length));h[o]=120,h[o+1]=156,o+=2,o=s.F.deflateRaw(i,h,o,t.level);var l=s.adler(i,0,i.length);return h[o+0]=l>>>24&255,h[o+1]=l>>>16&255,h[o+2]=l>>>8&255,h[o+3]=l>>>0&255,new Uint8Array(h.buffer,0,o+4)},s.deflateRaw=function(i,t){t==null&&(t={level:6});var o=new Uint8Array(50+Math.floor(1.1*i.length)),h=s.F.deflateRaw(i,o,h,t.level);return new Uint8Array(o.buffer,0,h)},s.encode=function(i,t){t==null&&(t=!1);var o=0,h=s.bin.writeUint,l=s.bin.writeUshort,d={};for(var a in i){var u=!s._noNeed(a)&&!t,c=i[a],f=s.crc.crc(c,0,c.length);d[a]={cpr:u,usize:c.length,crc:f,file:u?s.deflateRaw(c):c}}for(var a in d)o+=d[a].file.length+30+46+2*s.bin.sizeUTF8(a);o+=22;var v=new Uint8Array(o),y=0,S=[];for(var a in d){var A=d[a];S.push(y),y=s._writeHeader(v,y,a,A,0)}var O=0,U=y;for(var a in d)A=d[a],S.push(y),y=s._writeHeader(v,y,a,A,1,S[O++]);var E=y-U;return h(v,y,101010256),y+=4,l(v,y+=4,O),l(v,y+=2,O),h(v,y+=2,E),h(v,y+=4,U),y+=4,y+=2,v.buffer},s._noNeed=function(i){var t=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(t)!=-1},s._writeHeader=function(i,t,o,h,l,d){var a=s.bin.writeUint,u=s.bin.writeUshort,c=h.file;return a(i,t,l==0?67324752:33639248),t+=4,l==1&&(t+=2),u(i,t,20),u(i,t+=2,0),u(i,t+=2,h.cpr?8:0),a(i,t+=2,0),a(i,t+=4,h.crc),a(i,t+=4,c.length),a(i,t+=4,h.usize),u(i,t+=4,s.bin.sizeUTF8(o)),u(i,t+=2,0),t+=2,l==1&&(t+=2,t+=2,a(i,t+=6,d),t+=4),t+=s.bin.writeUTF8(i,t,o),l==0&&(i.set(c,t),t+=c.length),t},s.crc={table:function(){for(var i=new Uint32Array(256),t=0;t<256;t++){for(var o=t,h=0;h<8;h++)1&o?o=3988292384^o>>>1:o>>>=1;i[t]=o}return i}(),update:function(i,t,o,h){for(var l=0;l<h;l++)i=s.crc.table[255&(i^t[o+l])]^i>>>8;return i},crc:function(i,t,o){return 4294967295^s.crc.update(4294967295,i,t,o)}},s.adler=function(i,t,o){for(var h=1,l=0,d=t,a=t+o;d<a;){for(var u=Math.min(d+5552,a);d<u;)l+=h+=i[d++];h%=65521,l%=65521}return l<<16|h},s.bin={readUshort:function(i,t){return i[t]|i[t+1]<<8},writeUshort:function(i,t,o){i[t]=255&o,i[t+1]=o>>8&255},readUint:function(i,t){return 16777216*i[t+3]+(i[t+2]<<16|i[t+1]<<8|i[t])},writeUint:function(i,t,o){i[t]=255&o,i[t+1]=o>>8&255,i[t+2]=o>>16&255,i[t+3]=o>>24&255},readASCII:function(i,t,o){for(var h="",l=0;l<o;l++)h+=String.fromCharCode(i[t+l]);return h},writeASCII:function(i,t,o){for(var h=0;h<o.length;h++)i[t+h]=o.charCodeAt(h)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,t,o){for(var h,l="",d=0;d<o;d++)l+="%"+s.bin.pad(i[t+d].toString(16));try{h=decodeURIComponent(l)}catch{return s.bin.readASCII(i,t,o)}return h},writeUTF8:function(i,t,o){for(var h=o.length,l=0,d=0;d<h;d++){var a=o.charCodeAt(d);if(!(4294967168&a))i[t+l]=a,l++;else if(!(4294965248&a))i[t+l]=192|a>>6,i[t+l+1]=128|a>>0&63,l+=2;else if(!(4294901760&a))i[t+l]=224|a>>12,i[t+l+1]=128|a>>6&63,i[t+l+2]=128|a>>0&63,l+=3;else{if(4292870144&a)throw"e";i[t+l]=240|a>>18,i[t+l+1]=128|a>>12&63,i[t+l+2]=128|a>>6&63,i[t+l+3]=128|a>>0&63,l+=4}}return l},sizeUTF8:function(i){for(var t=i.length,o=0,h=0;h<t;h++){var l=i.charCodeAt(h);if(!(4294967168&l))o++;else if(!(4294965248&l))o+=2;else if(!(4294901760&l))o+=3;else{if(4292870144&l)throw"e";o+=4}}return o}},s.F={},s.F.deflateRaw=function(i,t,o,h){var l=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][h],d=s.F.U,a=s.F._goodIndex;s.F._hash;var u=s.F._putsE,c=0,f=o<<3,v=0,y=i.length;if(h==0){for(;c<y;)u(t,f,c+(M=Math.min(65535,y-c))==y?1:0),f=s.F._copyExact(i,c,M,t,f+8),c+=M;return f>>>3}var S=d.lits,A=d.strt,O=d.prev,U=0,E=0,P=0,w=0,_=0,p=0;for(y>2&&(A[p=s.F._hash(i,0)]=0),c=0;c<y;c++){if(_=p,c+1<y-2){p=s.F._hash(i,c+1);var g=c+1&32767;O[g]=A[p],A[p]=g}if(v<=c){(U>14e3||E>26697)&&y-c>100&&(v<c&&(S[U]=c-v,U+=2,v=c),f=s.F._writeBlock(c==y-1||v==y?1:0,S,U,w,i,P,c-P,t,f),U=E=w=0,P=c);var z=0;c<y-2&&(z=s.F._bestMatch(i,c,O,_,Math.min(l[2],y-c),l[3]));var M=z>>>16,x=65535&z;if(z!=0){x=65535&z;var C=a(M=z>>>16,d.of0);d.lhst[257+C]++;var R=a(x,d.df0);d.dhst[R]++,w+=d.exb[C]+d.dxb[R],S[U]=M<<23|c-v,S[U+1]=x<<16|C<<8|R,U+=2,v=c+M}else d.lhst[i[c]]++;E++}}for(P==c&&i.length!=0||(v<c&&(S[U]=c-v,U+=2,v=c),f=s.F._writeBlock(1,S,U,w,i,P,c-P,t,f),U=0,E=0,U=E=w=0,P=c);7&f;)f++;return f>>>3},s.F._bestMatch=function(i,t,o,h,l,d){var a=32767&t,u=o[a],c=a-u+32768&32767;if(u==a||h!=s.F._hash(i,t-c))return 0;for(var f=0,v=0,y=Math.min(32767,t);c<=y&&--d!=0&&u!=a;){if(f==0||i[t+f]==i[t+f-c]){var S=s.F._howLong(i,t,c);if(S>f){if(v=c,(f=S)>=l)break;c+2<S&&(S=c+2);for(var A=0,O=0;O<S-2;O++){var U=t-c+O+32768&32767,E=U-o[U]+32768&32767;E>A&&(A=E,u=U)}}}c+=(a=u)-(u=o[a])+32768&32767}return f<<16|v},s.F._howLong=function(i,t,o){if(i[t]!=i[t-o]||i[t+1]!=i[t+1-o]||i[t+2]!=i[t+2-o])return 0;var h=t,l=Math.min(i.length,t+258);for(t+=3;t<l&&i[t]==i[t-o];)t++;return t-h},s.F._hash=function(i,t){return(i[t]<<8|i[t+1])+(i[t+2]<<4)&65535},s.saved=0,s.F._writeBlock=function(i,t,o,h,l,d,a,u,c){var f,v,y,S,A,O,U,E,P,w=s.F.U,_=s.F._putsF,p=s.F._putsE;w.lhst[256]++,v=(f=s.F.getTrees())[0],y=f[1],S=f[2],A=f[3],O=f[4],U=f[5],E=f[6],P=f[7];var g=32+(c+3&7?8-(c+3&7):0)+(a<<3),z=h+s.F.contSize(w.fltree,w.lhst)+s.F.contSize(w.fdtree,w.dhst),M=h+s.F.contSize(w.ltree,w.lhst)+s.F.contSize(w.dtree,w.dhst);M+=14+3*U+s.F.contSize(w.itree,w.ihst)+(2*w.ihst[16]+3*w.ihst[17]+7*w.ihst[18]);for(var x=0;x<286;x++)w.lhst[x]=0;for(x=0;x<30;x++)w.dhst[x]=0;for(x=0;x<19;x++)w.ihst[x]=0;var C=g<z&&g<M?0:z<M?1:2;if(_(u,c,i),_(u,c+1,C),c+=3,C==0){for(;7&c;)c++;c=s.F._copyExact(l,d,a,u,c)}else{var R,T;if(C==1&&(R=w.fltree,T=w.fdtree),C==2){s.F.makeCodes(w.ltree,v),s.F.revCodes(w.ltree,v),s.F.makeCodes(w.dtree,y),s.F.revCodes(w.dtree,y),s.F.makeCodes(w.itree,S),s.F.revCodes(w.itree,S),R=w.ltree,T=w.dtree,p(u,c,A-257),p(u,c+=5,O-1),p(u,c+=5,U-4),c+=4;for(var b=0;b<U;b++)p(u,c+3*b,w.itree[1+(w.ordr[b]<<1)]);c+=3*U,c=s.F._codeTiny(E,w.itree,u,c),c=s.F._codeTiny(P,w.itree,u,c)}for(var m=d,D=0;D<o;D+=2){for(var I=t[D],W=I>>>23,B=m+(8388607&I);m<B;)c=s.F._writeLit(l[m++],R,u,c);if(W!=0){var H=t[D+1],k=H>>16,L=H>>8&255,F=255&H;p(u,c=s.F._writeLit(257+L,R,u,c),W-w.of0[L]),c+=w.exb[L],_(u,c=s.F._writeLit(F,T,u,c),k-w.df0[F]),c+=w.dxb[F],m+=W}}c=s.F._writeLit(256,R,u,c)}return c},s.F._copyExact=function(i,t,o,h,l){var d=l>>>3;return h[d]=o,h[d+1]=o>>>8,h[d+2]=255-h[d],h[d+3]=255-h[d+1],d+=4,h.set(new Uint8Array(i.buffer,t,o),d),l+(o+4<<3)},s.F.getTrees=function(){for(var i=s.F.U,t=s.F._hufTree(i.lhst,i.ltree,15),o=s.F._hufTree(i.dhst,i.dtree,15),h=[],l=s.F._lenCodes(i.ltree,h),d=[],a=s.F._lenCodes(i.dtree,d),u=0;u<h.length;u+=2)i.ihst[h[u]]++;for(u=0;u<d.length;u+=2)i.ihst[d[u]]++;for(var c=s.F._hufTree(i.ihst,i.itree,7),f=19;f>4&&i.itree[1+(i.ordr[f-1]<<1)]==0;)f--;return[t,o,c,l,a,f,h,d]},s.F.getSecond=function(i){for(var t=[],o=0;o<i.length;o+=2)t.push(i[o+1]);return t},s.F.nonZero=function(i){for(var t="",o=0;o<i.length;o+=2)i[o+1]!=0&&(t+=(o>>1)+",");return t},s.F.contSize=function(i,t){for(var o=0,h=0;h<t.length;h++)o+=t[h]*i[1+(h<<1)];return o},s.F._codeTiny=function(i,t,o,h){for(var l=0;l<i.length;l+=2){var d=i[l],a=i[l+1];h=s.F._writeLit(d,t,o,h);var u=d==16?2:d==17?3:7;d>15&&(s.F._putsE(o,h,a,u),h+=u)}return h},s.F._lenCodes=function(i,t){for(var o=i.length;o!=2&&i[o-1]==0;)o-=2;for(var h=0;h<o;h+=2){var l=i[h+1],d=h+3<o?i[h+3]:-1,a=h+5<o?i[h+5]:-1,u=h==0?-1:i[h-1];if(l==0&&d==l&&a==l){for(var c=h+5;c+2<o&&i[c+2]==l;)c+=2;(f=Math.min(c+1-h>>>1,138))<11?t.push(17,f-3):t.push(18,f-11),h+=2*f-2}else if(l==u&&d==l&&a==l){for(c=h+5;c+2<o&&i[c+2]==l;)c+=2;var f=Math.min(c+1-h>>>1,6);t.push(16,f-3),h+=2*f-2}else t.push(l,0)}return o>>>1},s.F._hufTree=function(i,t,o){var h=[],l=i.length,d=t.length,a=0;for(a=0;a<d;a+=2)t[a]=0,t[a+1]=0;for(a=0;a<l;a++)i[a]!=0&&h.push({lit:a,f:i[a]});var u=h.length,c=h.slice(0);if(u==0)return 0;if(u==1){var f=h[0].lit;return c=f==0?1:0,t[1+(f<<1)]=1,t[1+(c<<1)]=1,1}h.sort(function(E,P){return E.f-P.f});var v=h[0],y=h[1],S=0,A=1,O=2;for(h[0]={lit:-1,f:v.f+y.f,l:v,r:y,d:0};A!=u-1;)v=S!=A&&(O==u||h[S].f<h[O].f)?h[S++]:h[O++],y=S!=A&&(O==u||h[S].f<h[O].f)?h[S++]:h[O++],h[A++]={lit:-1,f:v.f+y.f,l:v,r:y};var U=s.F.setDepth(h[A-1],0);for(U>o&&(s.F.restrictDepth(c,o,U),U=o),a=0;a<u;a++)t[1+(c[a].lit<<1)]=c[a].d;return U},s.F.setDepth=function(i,t){return i.lit!=-1?(i.d=t,t):Math.max(s.F.setDepth(i.l,t+1),s.F.setDepth(i.r,t+1))},s.F.restrictDepth=function(i,t,o){var h=0,l=1<<o-t,d=0;for(i.sort(function(u,c){return c.d==u.d?u.f-c.f:c.d-u.d}),h=0;h<i.length&&i[h].d>t;h++){var a=i[h].d;i[h].d=t,d+=l-(1<<o-a)}for(d>>>=o-t;d>0;)(a=i[h].d)<t?(i[h].d++,d-=1<<t-a-1):h++;for(;h>=0;h--)i[h].d==t&&d<0&&(i[h].d--,d++);d!=0&&console.log("debt left")},s.F._goodIndex=function(i,t){var o=0;return t[16|o]<=i&&(o|=16),t[8|o]<=i&&(o|=8),t[4|o]<=i&&(o|=4),t[2|o]<=i&&(o|=2),t[1|o]<=i&&(o|=1),o},s.F._writeLit=function(i,t,o,h){return s.F._putsF(o,h,t[i<<1]),h+t[1+(i<<1)]},s.F.inflate=function(i,t){var o=Uint8Array;if(i[0]==3&&i[1]==0)return t||new o(0);var h=s.F,l=h._bitsF,d=h._bitsE,a=h._decodeTiny,u=h.makeCodes,c=h.codes2map,f=h._get17,v=h.U,y=t==null;y&&(t=new o(i.length>>>2<<3));for(var S,A,O=0,U=0,E=0,P=0,w=0,_=0,p=0,g=0,z=0;O==0;)if(O=l(i,z,1),U=l(i,z+1,2),z+=3,U!=0){if(y&&(t=s.F._check(t,g+(1<<17))),U==1&&(S=v.flmap,A=v.fdmap,_=511,p=31),U==2){E=d(i,z,5)+257,P=d(i,z+5,5)+1,w=d(i,z+10,4)+4,z+=14;for(var M=0;M<38;M+=2)v.itree[M]=0,v.itree[M+1]=0;var x=1;for(M=0;M<w;M++){var C=d(i,z+3*M,3);v.itree[1+(v.ordr[M]<<1)]=C,C>x&&(x=C)}z+=3*w,u(v.itree,x),c(v.itree,x,v.imap),S=v.lmap,A=v.dmap,z=a(v.imap,(1<<x)-1,E+P,i,z,v.ttree);var R=h._copyOut(v.ttree,0,E,v.ltree);_=(1<<R)-1;var T=h._copyOut(v.ttree,E,P,v.dtree);p=(1<<T)-1,u(v.ltree,R),c(v.ltree,R,S),u(v.dtree,T),c(v.dtree,T,A)}for(;;){var b=S[f(i,z)&_];z+=15&b;var m=b>>>4;if(!(m>>>8))t[g++]=m;else{if(m==256)break;var D=g+m-254;if(m>264){var I=v.ldef[m-257];D=g+(I>>>3)+d(i,z,7&I),z+=7&I}var W=A[f(i,z)&p];z+=15&W;var B=W>>>4,H=v.ddef[B],k=(H>>>4)+l(i,z,15&H);for(z+=15&H,y&&(t=s.F._check(t,g+(1<<17)));g<D;)t[g]=t[g++-k],t[g]=t[g++-k],t[g]=t[g++-k],t[g]=t[g++-k];g=D}}}else{7&z&&(z+=8-(7&z));var L=4+(z>>>3),F=i[L-4]|i[L-3]<<8;y&&(t=s.F._check(t,g+F)),t.set(new o(i.buffer,i.byteOffset+L,F),g),z=L+F<<3,g+=F}return t.length==g?t:t.slice(0,g)},s.F._check=function(i,t){var o=i.length;if(t<=o)return i;var h=new Uint8Array(Math.max(o<<1,t));return h.set(i,0),h},s.F._decodeTiny=function(i,t,o,h,l,d){for(var a=s.F._bitsE,u=s.F._get17,c=0;c<o;){var f=i[u(h,l)&t];l+=15&f;var v=f>>>4;if(v<=15)d[c]=v,c++;else{var y=0,S=0;v==16?(S=3+a(h,l,2),l+=2,y=d[c-1]):v==17?(S=3+a(h,l,3),l+=3):v==18&&(S=11+a(h,l,7),l+=7);for(var A=c+S;c<A;)d[c]=y,c++}}return l},s.F._copyOut=function(i,t,o,h){for(var l=0,d=0,a=h.length>>>1;d<o;){var u=i[d+t];h[d<<1]=0,h[1+(d<<1)]=u,u>l&&(l=u),d++}for(;d<a;)h[d<<1]=0,h[1+(d<<1)]=0,d++;return l},s.F.makeCodes=function(i,t){for(var o,h,l,d,a=s.F.U,u=i.length,c=a.bl_count,f=0;f<=t;f++)c[f]=0;for(f=1;f<u;f+=2)c[i[f]]++;var v=a.next_code;for(o=0,c[0]=0,h=1;h<=t;h++)o=o+c[h-1]<<1,v[h]=o;for(l=0;l<u;l+=2)(d=i[l+1])!=0&&(i[l]=v[d],v[d]++)},s.F.codes2map=function(i,t,o){for(var h=i.length,l=s.F.U.rev15,d=0;d<h;d+=2)if(i[d+1]!=0)for(var a=d>>1,u=i[d+1],c=a<<4|u,f=t-u,v=i[d]<<f,y=v+(1<<f);v!=y;)o[l[v]>>>15-t]=c,v++},s.F.revCodes=function(i,t){for(var o=s.F.U.rev15,h=15-t,l=0;l<i.length;l+=2){var d=i[l]<<t-i[l+1];i[l]=o[d]>>>h}},s.F._putsE=function(i,t,o){o<<=7&t;var h=t>>>3;i[h]|=o,i[h+1]|=o>>>8},s.F._putsF=function(i,t,o){o<<=7&t;var h=t>>>3;i[h]|=o,i[h+1]|=o>>>8,i[h+2]|=o>>>16},s.F._bitsE=function(i,t,o){return(i[t>>>3]|i[1+(t>>>3)]<<8)>>>(7&t)&(1<<o)-1},s.F._bitsF=function(i,t,o){return(i[t>>>3]|i[1+(t>>>3)]<<8|i[2+(t>>>3)]<<16)>>>(7&t)&(1<<o)-1},s.F._get17=function(i,t){return(i[t>>>3]|i[1+(t>>>3)]<<8|i[2+(t>>>3)]<<16)>>>(7&t)},s.F._get25=function(i,t){return(i[t>>>3]|i[1+(t>>>3)]<<8|i[2+(t>>>3)]<<16|i[3+(t>>>3)]<<24)>>>(7&t)},s.F.U=(n=Uint16Array,r=Uint32Array,{next_code:new n(16),bl_count:new n(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new n(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new r(32),flmap:new n(512),fltree:[],fdmap:new n(32),fdtree:[],lmap:new n(32768),ltree:[],ttree:[],dmap:new n(32768),dtree:[],imap:new n(512),itree:[],rev15:new n(32768),lhst:new r(286),dhst:new r(30),ihst:new r(19),lits:new r(15e3),strt:new n(65536),prev:new n(32768)}),function(){for(var i=s.F.U,t=0;t<32768;t++){var o=t;o=(4278255360&(o=(4042322160&(o=(3435973836&(o=(2863311530&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,i.rev15[t]=(o>>>16|o<<16)>>>17}function h(l,d,a){for(;d--!=0;)l.push(0,a)}for(t=0;t<32;t++)i.ldef[t]=i.of0[t]<<3|i.exb[t],i.ddef[t]=i.df0[t]<<4|i.dxb[t];h(i.fltree,144,8),h(i.fltree,112,9),h(i.fltree,24,7),h(i.fltree,8,8),s.F.makeCodes(i.fltree,9),s.F.codes2map(i.fltree,9,i.flmap),s.F.revCodes(i.fltree,9),h(i.fdtree,32,5),s.F.makeCodes(i.fdtree,5),s.F.codes2map(i.fdtree,5,i.fdmap),s.F.revCodes(i.fdtree,5),h(i.itree,19,0),h(i.ltree,286,0),h(i.dtree,30,0),h(i.ttree,320,0)}()})();var sr=ir({__proto__:null,default:St},[St]);const Te=function(){var e={nextZero(a,u){for(;a[u]!=0;)u++;return u},readUshort:(a,u)=>a[u]<<8|a[u+1],writeUshort(a,u,c){a[u]=c>>8&255,a[u+1]=255&c},readUint:(a,u)=>16777216*a[u]+(a[u+1]<<16|a[u+2]<<8|a[u+3]),writeUint(a,u,c){a[u]=c>>24&255,a[u+1]=c>>16&255,a[u+2]=c>>8&255,a[u+3]=255&c},readASCII(a,u,c){let f="";for(let v=0;v<c;v++)f+=String.fromCharCode(a[u+v]);return f},writeASCII(a,u,c){for(let f=0;f<c.length;f++)a[u+f]=c.charCodeAt(f)},readBytes(a,u,c){const f=[];for(let v=0;v<c;v++)f.push(a[u+v]);return f},pad:a=>a.length<2?`0${a}`:a,readUTF8(a,u,c){let f,v="";for(let y=0;y<c;y++)v+=`%${e.pad(a[u+y].toString(16))}`;try{f=decodeURIComponent(v)}catch{return e.readASCII(a,u,c)}return f}};function n(a,u,c,f){const v=u*c,y=t(f),S=Math.ceil(u*y/8),A=new Uint8Array(4*v),O=new Uint32Array(A.buffer),{ctype:U}=f,{depth:E}=f,P=e.readUshort;if(U==6){const I=v<<2;if(E==8)for(var w=0;w<I;w+=4)A[w]=a[w],A[w+1]=a[w+1],A[w+2]=a[w+2],A[w+3]=a[w+3];if(E==16)for(w=0;w<I;w++)A[w]=a[w<<1]}else if(U==2){const I=f.tabs.tRNS;if(I==null){if(E==8)for(w=0;w<v;w++){var _=3*w;O[w]=255<<24|a[_+2]<<16|a[_+1]<<8|a[_]}if(E==16)for(w=0;w<v;w++)_=6*w,O[w]=255<<24|a[_+4]<<16|a[_+2]<<8|a[_]}else{var p=I[0];const W=I[1],B=I[2];if(E==8)for(w=0;w<v;w++){var g=w<<2;_=3*w,O[w]=255<<24|a[_+2]<<16|a[_+1]<<8|a[_],a[_]==p&&a[_+1]==W&&a[_+2]==B&&(A[g+3]=0)}if(E==16)for(w=0;w<v;w++)g=w<<2,_=6*w,O[w]=255<<24|a[_+4]<<16|a[_+2]<<8|a[_],P(a,_)==p&&P(a,_+2)==W&&P(a,_+4)==B&&(A[g+3]=0)}}else if(U==3){const I=f.tabs.PLTE,W=f.tabs.tRNS,B=W?W.length:0;if(E==1)for(var z=0;z<c;z++){var M=z*S,x=z*u;for(w=0;w<u;w++){g=x+w<<2;var C=3*(R=a[M+(w>>3)]>>7-((7&w)<<0)&1);A[g]=I[C],A[g+1]=I[C+1],A[g+2]=I[C+2],A[g+3]=R<B?W[R]:255}}if(E==2)for(z=0;z<c;z++)for(M=z*S,x=z*u,w=0;w<u;w++)g=x+w<<2,C=3*(R=a[M+(w>>2)]>>6-((3&w)<<1)&3),A[g]=I[C],A[g+1]=I[C+1],A[g+2]=I[C+2],A[g+3]=R<B?W[R]:255;if(E==4)for(z=0;z<c;z++)for(M=z*S,x=z*u,w=0;w<u;w++)g=x+w<<2,C=3*(R=a[M+(w>>1)]>>4-((1&w)<<2)&15),A[g]=I[C],A[g+1]=I[C+1],A[g+2]=I[C+2],A[g+3]=R<B?W[R]:255;if(E==8)for(w=0;w<v;w++){var R;g=w<<2,C=3*(R=a[w]),A[g]=I[C],A[g+1]=I[C+1],A[g+2]=I[C+2],A[g+3]=R<B?W[R]:255}}else if(U==4){if(E==8)for(w=0;w<v;w++){g=w<<2;var T=a[b=w<<1];A[g]=T,A[g+1]=T,A[g+2]=T,A[g+3]=a[b+1]}if(E==16)for(w=0;w<v;w++){var b;g=w<<2,T=a[b=w<<2],A[g]=T,A[g+1]=T,A[g+2]=T,A[g+3]=a[b+2]}}else if(U==0)for(p=f.tabs.tRNS?f.tabs.tRNS:-1,z=0;z<c;z++){const I=z*S,W=z*u;if(E==1)for(var m=0;m<u;m++){var D=(T=255*(a[I+(m>>>3)]>>>7-(7&m)&1))==255*p?0:255;O[W+m]=D<<24|T<<16|T<<8|T}else if(E==2)for(m=0;m<u;m++)D=(T=85*(a[I+(m>>>2)]>>>6-((3&m)<<1)&3))==85*p?0:255,O[W+m]=D<<24|T<<16|T<<8|T;else if(E==4)for(m=0;m<u;m++)D=(T=17*(a[I+(m>>>1)]>>>4-((1&m)<<2)&15))==17*p?0:255,O[W+m]=D<<24|T<<16|T<<8|T;else if(E==8)for(m=0;m<u;m++)D=(T=a[I+m])==p?0:255,O[W+m]=D<<24|T<<16|T<<8|T;else if(E==16)for(m=0;m<u;m++)T=a[I+(m<<1)],D=P(a,I+(m<<1))==p?0:255,O[W+m]=D<<24|T<<16|T<<8|T}return A}function r(a,u,c,f){const v=t(a),y=Math.ceil(c*v/8),S=new Uint8Array((y+1+a.interlace)*f);return u=a.tabs.CgBI?i(u,S):s(u,S),a.interlace==0?u=o(u,a,0,c,f):a.interlace==1&&(u=function(O,U){const E=U.width,P=U.height,w=t(U),_=w>>3,p=Math.ceil(E*w/8),g=new Uint8Array(P*p);let z=0;const M=[0,0,4,0,2,0,1],x=[0,4,0,2,0,1,0],C=[8,8,8,4,4,2,2],R=[8,8,4,4,2,2,1];let T=0;for(;T<7;){const m=C[T],D=R[T];let I=0,W=0,B=M[T];for(;B<P;)B+=m,W++;let H=x[T];for(;H<E;)H+=D,I++;const k=Math.ceil(I*w/8);o(O,U,z,I,W);let L=0,F=M[T];for(;F<P;){let N=x[T],ie=z+L*k<<3;for(;N<E;){var b;if(w==1&&(b=(b=O[ie>>3])>>7-(7&ie)&1,g[F*p+(N>>3)]|=b<<7-((7&N)<<0)),w==2&&(b=(b=O[ie>>3])>>6-(7&ie)&3,g[F*p+(N>>2)]|=b<<6-((3&N)<<1)),w==4&&(b=(b=O[ie>>3])>>4-(7&ie)&15,g[F*p+(N>>1)]|=b<<4-((1&N)<<2)),w>=8){const Z=F*p+N*_;for(let q=0;q<_;q++)g[Z+q]=O[(ie>>3)+q]}ie+=w,N+=D}L++,F+=m}I*W!=0&&(z+=W*(1+k)),T+=1}return g}(u,a)),u}function s(a,u){return i(new Uint8Array(a.buffer,2,a.length-6),u)}var i=function(){const a={H:{}};return a.H.N=function(u,c){const f=Uint8Array;let v,y,S=0,A=0,O=0,U=0,E=0,P=0,w=0,_=0,p=0;if(u[0]==3&&u[1]==0)return c||new f(0);const g=a.H,z=g.b,M=g.e,x=g.R,C=g.n,R=g.A,T=g.Z,b=g.m,m=c==null;for(m&&(c=new f(u.length>>>2<<5));S==0;)if(S=z(u,p,1),A=z(u,p+1,2),p+=3,A!=0){if(m&&(c=a.H.W(c,_+(1<<17))),A==1&&(v=b.J,y=b.h,P=511,w=31),A==2){O=M(u,p,5)+257,U=M(u,p+5,5)+1,E=M(u,p+10,4)+4,p+=14;let I=1;for(var D=0;D<38;D+=2)b.Q[D]=0,b.Q[D+1]=0;for(D=0;D<E;D++){const H=M(u,p+3*D,3);b.Q[1+(b.X[D]<<1)]=H,H>I&&(I=H)}p+=3*E,C(b.Q,I),R(b.Q,I,b.u),v=b.w,y=b.d,p=x(b.u,(1<<I)-1,O+U,u,p,b.v);const W=g.V(b.v,0,O,b.C);P=(1<<W)-1;const B=g.V(b.v,O,U,b.D);w=(1<<B)-1,C(b.C,W),R(b.C,W,v),C(b.D,B),R(b.D,B,y)}for(;;){const I=v[T(u,p)&P];p+=15&I;const W=I>>>4;if(!(W>>>8))c[_++]=W;else{if(W==256)break;{let B=_+W-254;if(W>264){const N=b.q[W-257];B=_+(N>>>3)+M(u,p,7&N),p+=7&N}const H=y[T(u,p)&w];p+=15&H;const k=H>>>4,L=b.c[k],F=(L>>>4)+z(u,p,15&L);for(p+=15&L;_<B;)c[_]=c[_++-F],c[_]=c[_++-F],c[_]=c[_++-F],c[_]=c[_++-F];_=B}}}}else{7&p&&(p+=8-(7&p));const I=4+(p>>>3),W=u[I-4]|u[I-3]<<8;m&&(c=a.H.W(c,_+W)),c.set(new f(u.buffer,u.byteOffset+I,W),_),p=I+W<<3,_+=W}return c.length==_?c:c.slice(0,_)},a.H.W=function(u,c){const f=u.length;if(c<=f)return u;const v=new Uint8Array(f<<1);return v.set(u,0),v},a.H.R=function(u,c,f,v,y,S){const A=a.H.e,O=a.H.Z;let U=0;for(;U<f;){const E=u[O(v,y)&c];y+=15&E;const P=E>>>4;if(P<=15)S[U]=P,U++;else{let w=0,_=0;P==16?(_=3+A(v,y,2),y+=2,w=S[U-1]):P==17?(_=3+A(v,y,3),y+=3):P==18&&(_=11+A(v,y,7),y+=7);const p=U+_;for(;U<p;)S[U]=w,U++}}return y},a.H.V=function(u,c,f,v){let y=0,S=0;const A=v.length>>>1;for(;S<f;){const O=u[S+c];v[S<<1]=0,v[1+(S<<1)]=O,O>y&&(y=O),S++}for(;S<A;)v[S<<1]=0,v[1+(S<<1)]=0,S++;return y},a.H.n=function(u,c){const f=a.H.m,v=u.length;let y,S,A,O;const U=f.j;for(var E=0;E<=c;E++)U[E]=0;for(E=1;E<v;E+=2)U[u[E]]++;const P=f.K;for(y=0,U[0]=0,S=1;S<=c;S++)y=y+U[S-1]<<1,P[S]=y;for(A=0;A<v;A+=2)O=u[A+1],O!=0&&(u[A]=P[O],P[O]++)},a.H.A=function(u,c,f){const v=u.length,y=a.H.m.r;for(let S=0;S<v;S+=2)if(u[S+1]!=0){const A=S>>1,O=u[S+1],U=A<<4|O,E=c-O;let P=u[S]<<E;const w=P+(1<<E);for(;P!=w;)f[y[P]>>>15-c]=U,P++}},a.H.l=function(u,c){const f=a.H.m.r,v=15-c;for(let y=0;y<u.length;y+=2){const S=u[y]<<c-u[y+1];u[y]=f[S]>>>v}},a.H.M=function(u,c,f){f<<=7&c;const v=c>>>3;u[v]|=f,u[v+1]|=f>>>8},a.H.I=function(u,c,f){f<<=7&c;const v=c>>>3;u[v]|=f,u[v+1]|=f>>>8,u[v+2]|=f>>>16},a.H.e=function(u,c,f){return(u[c>>>3]|u[1+(c>>>3)]<<8)>>>(7&c)&(1<<f)-1},a.H.b=function(u,c,f){return(u[c>>>3]|u[1+(c>>>3)]<<8|u[2+(c>>>3)]<<16)>>>(7&c)&(1<<f)-1},a.H.Z=function(u,c){return(u[c>>>3]|u[1+(c>>>3)]<<8|u[2+(c>>>3)]<<16)>>>(7&c)},a.H.i=function(u,c){return(u[c>>>3]|u[1+(c>>>3)]<<8|u[2+(c>>>3)]<<16|u[3+(c>>>3)]<<24)>>>(7&c)},a.H.m=function(){const u=Uint16Array,c=Uint32Array;return{K:new u(16),j:new u(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new u(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new c(32),J:new u(512),_:[],h:new u(32),$:[],w:new u(32768),C:[],v:[],d:new u(32768),D:[],u:new u(512),Q:[],r:new u(32768),s:new c(286),Y:new c(30),a:new c(19),t:new c(15e3),k:new u(65536),g:new u(32768)}}(),function(){const u=a.H.m;for(var c=0;c<32768;c++){let v=c;v=(2863311530&v)>>>1|(1431655765&v)<<1,v=(3435973836&v)>>>2|(858993459&v)<<2,v=(4042322160&v)>>>4|(252645135&v)<<4,v=(4278255360&v)>>>8|(16711935&v)<<8,u.r[c]=(v>>>16|v<<16)>>>17}function f(v,y,S){for(;y--!=0;)v.push(0,S)}for(c=0;c<32;c++)u.q[c]=u.S[c]<<3|u.T[c],u.c[c]=u.p[c]<<4|u.z[c];f(u._,144,8),f(u._,112,9),f(u._,24,7),f(u._,8,8),a.H.n(u._,9),a.H.A(u._,9,u.J),a.H.l(u._,9),f(u.$,32,5),a.H.n(u.$,5),a.H.A(u.$,5,u.h),a.H.l(u.$,5),f(u.Q,19,0),f(u.C,286,0),f(u.D,30,0),f(u.v,320,0)}(),a.H.N}();function t(a){return[1,null,3,1,2,null,4][a.ctype]*a.depth}function o(a,u,c,f,v){let y=t(u);const S=Math.ceil(f*y/8);let A,O;y=Math.ceil(y/8);let U=a[c],E=0;if(U>1&&(a[c]=[0,0,1][U-2]),U==3)for(E=y;E<S;E++)a[E+1]=a[E+1]+(a[E+1-y]>>>1)&255;for(let P=0;P<v;P++)if(A=c+P*S,O=A+P+1,U=a[O-1],E=0,U==0)for(;E<S;E++)a[A+E]=a[O+E];else if(U==1){for(;E<y;E++)a[A+E]=a[O+E];for(;E<S;E++)a[A+E]=a[O+E]+a[A+E-y]}else if(U==2)for(;E<S;E++)a[A+E]=a[O+E]+a[A+E-S];else if(U==3){for(;E<y;E++)a[A+E]=a[O+E]+(a[A+E-S]>>>1);for(;E<S;E++)a[A+E]=a[O+E]+(a[A+E-S]+a[A+E-y]>>>1)}else{for(;E<y;E++)a[A+E]=a[O+E]+h(0,a[A+E-S],0);for(;E<S;E++)a[A+E]=a[O+E]+h(a[A+E-y],a[A+E-S],a[A+E-y-S])}return a}function h(a,u,c){const f=a+u-c,v=f-a,y=f-u,S=f-c;return v*v<=y*y&&v*v<=S*S?a:y*y<=S*S?u:c}function l(a,u,c){c.width=e.readUint(a,u),u+=4,c.height=e.readUint(a,u),u+=4,c.depth=a[u],u++,c.ctype=a[u],u++,c.compress=a[u],u++,c.filter=a[u],u++,c.interlace=a[u],u++}function d(a,u,c,f,v,y,S,A,O){const U=Math.min(u,v),E=Math.min(c,y);let P=0,w=0;for(let T=0;T<E;T++)for(let b=0;b<U;b++)if(S>=0&&A>=0?(P=T*u+b<<2,w=(A+T)*v+S+b<<2):(P=(-A+T)*u-S+b<<2,w=T*v+b<<2),O==0)f[w]=a[P],f[w+1]=a[P+1],f[w+2]=a[P+2],f[w+3]=a[P+3];else if(O==1){var _=a[P+3]*.00392156862745098,p=a[P]*_,g=a[P+1]*_,z=a[P+2]*_,M=f[w+3]*(1/255),x=f[w]*M,C=f[w+1]*M,R=f[w+2]*M;const m=1-_,D=_+M*m,I=D==0?0:1/D;f[w+3]=255*D,f[w+0]=(p+x*m)*I,f[w+1]=(g+C*m)*I,f[w+2]=(z+R*m)*I}else if(O==2)_=a[P+3],p=a[P],g=a[P+1],z=a[P+2],M=f[w+3],x=f[w],C=f[w+1],R=f[w+2],_==M&&p==x&&g==C&&z==R?(f[w]=0,f[w+1]=0,f[w+2]=0,f[w+3]=0):(f[w]=p,f[w+1]=g,f[w+2]=z,f[w+3]=_);else if(O==3){if(_=a[P+3],p=a[P],g=a[P+1],z=a[P+2],M=f[w+3],x=f[w],C=f[w+1],R=f[w+2],_==M&&p==x&&g==C&&z==R)continue;if(_<220&&M>20)return!1}return!0}return{decode:function(u){const c=new Uint8Array(u);let f=8;const v=e,y=v.readUshort,S=v.readUint,A={tabs:{},frames:[]},O=new Uint8Array(c.length);let U,E=0,P=0;const w=[137,80,78,71,13,10,26,10];for(var _=0;_<8;_++)if(c[_]!=w[_])throw"The input is not a PNG file!";for(;f<c.length;){const T=v.readUint(c,f);f+=4;const b=v.readASCII(c,f,4);if(f+=4,b=="IHDR")l(c,f,A);else if(b=="iCCP"){for(var p=f;c[p]!=0;)p++;v.readASCII(c,f,p-f),c[p+1];const m=c.slice(p+2,f+T);let D=null;try{D=s(m)}catch{D=i(m)}A.tabs[b]=D}else if(b=="CgBI")A.tabs[b]=c.slice(f,f+4);else if(b=="IDAT"){for(_=0;_<T;_++)O[E+_]=c[f+_];E+=T}else if(b=="acTL")A.tabs[b]={num_frames:S(c,f),num_plays:S(c,f+4)},U=new Uint8Array(c.length);else if(b=="fcTL"){P!=0&&((R=A.frames[A.frames.length-1]).data=r(A,U.slice(0,P),R.rect.width,R.rect.height),P=0);const m={x:S(c,f+12),y:S(c,f+16),width:S(c,f+4),height:S(c,f+8)};let D=y(c,f+22);D=y(c,f+20)/(D==0?100:D);const I={rect:m,delay:Math.round(1e3*D),dispose:c[f+24],blend:c[f+25]};A.frames.push(I)}else if(b=="fdAT"){for(_=0;_<T-4;_++)U[P+_]=c[f+_+4];P+=T-4}else if(b=="pHYs")A.tabs[b]=[v.readUint(c,f),v.readUint(c,f+4),c[f+8]];else if(b=="cHRM")for(A.tabs[b]=[],_=0;_<8;_++)A.tabs[b].push(v.readUint(c,f+4*_));else if(b=="tEXt"||b=="zTXt"){A.tabs[b]==null&&(A.tabs[b]={});var g=v.nextZero(c,f),z=v.readASCII(c,f,g-f),M=f+T-g-1;if(b=="tEXt")C=v.readASCII(c,g+1,M);else{var x=s(c.slice(g+2,g+2+M));C=v.readUTF8(x,0,x.length)}A.tabs[b][z]=C}else if(b=="iTXt"){A.tabs[b]==null&&(A.tabs[b]={}),g=0,p=f,g=v.nextZero(c,p),z=v.readASCII(c,p,g-p);const m=c[p=g+1];var C;c[p+1],p+=2,g=v.nextZero(c,p),v.readASCII(c,p,g-p),p=g+1,g=v.nextZero(c,p),v.readUTF8(c,p,g-p),M=T-((p=g+1)-f),m==0?C=v.readUTF8(c,p,M):(x=s(c.slice(p,p+M)),C=v.readUTF8(x,0,x.length)),A.tabs[b][z]=C}else if(b=="PLTE")A.tabs[b]=v.readBytes(c,f,T);else if(b=="hIST"){const m=A.tabs.PLTE.length/3;for(A.tabs[b]=[],_=0;_<m;_++)A.tabs[b].push(y(c,f+2*_))}else if(b=="tRNS")A.ctype==3?A.tabs[b]=v.readBytes(c,f,T):A.ctype==0?A.tabs[b]=y(c,f):A.ctype==2&&(A.tabs[b]=[y(c,f),y(c,f+2),y(c,f+4)]);else if(b=="gAMA")A.tabs[b]=v.readUint(c,f)/1e5;else if(b=="sRGB")A.tabs[b]=c[f];else if(b=="bKGD")A.ctype==0||A.ctype==4?A.tabs[b]=[y(c,f)]:A.ctype==2||A.ctype==6?A.tabs[b]=[y(c,f),y(c,f+2),y(c,f+4)]:A.ctype==3&&(A.tabs[b]=c[f]);else if(b=="IEND")break;f+=T,v.readUint(c,f),f+=4}var R;return P!=0&&((R=A.frames[A.frames.length-1]).data=r(A,U.slice(0,P),R.rect.width,R.rect.height)),A.data=r(A,O,A.width,A.height),delete A.compress,delete A.interlace,delete A.filter,A},toRGBA8:function(u){const c=u.width,f=u.height;if(u.tabs.acTL==null)return[n(u.data,c,f,u).buffer];const v=[];u.frames[0].data==null&&(u.frames[0].data=u.data);const y=c*f*4,S=new Uint8Array(y),A=new Uint8Array(y),O=new Uint8Array(y);for(let E=0;E<u.frames.length;E++){const P=u.frames[E],w=P.rect.x,_=P.rect.y,p=P.rect.width,g=P.rect.height,z=n(P.data,p,g,u);if(E!=0)for(var U=0;U<y;U++)O[U]=S[U];if(P.blend==0?d(z,p,g,S,c,f,w,_,0):P.blend==1&&d(z,p,g,S,c,f,w,_,1),v.push(S.buffer.slice(0)),P.dispose!=0){if(P.dispose==1)d(A,p,g,S,c,f,w,_,0);else if(P.dispose==2)for(U=0;U<y;U++)S[U]=O[U]}}return v},_paeth:h,_copyTile:d,_bin:e}}();(function(){const{_copyTile:e}=Te,{_bin:n}=Te,r=Te._paeth;var s={table:function(){const p=new Uint32Array(256);for(let g=0;g<256;g++){let z=g;for(let M=0;M<8;M++)1&z?z=3988292384^z>>>1:z>>>=1;p[g]=z}return p}(),update(p,g,z,M){for(let x=0;x<M;x++)p=s.table[255&(p^g[z+x])]^p>>>8;return p},crc:(p,g,z)=>4294967295^s.update(4294967295,p,g,z)};function i(p,g,z,M){g[z]+=p[0]*M>>4,g[z+1]+=p[1]*M>>4,g[z+2]+=p[2]*M>>4,g[z+3]+=p[3]*M>>4}function t(p){return Math.max(0,Math.min(255,p))}function o(p,g){const z=p[0]-g[0],M=p[1]-g[1],x=p[2]-g[2],C=p[3]-g[3];return z*z+M*M+x*x+C*C}function h(p,g,z,M,x,C,R){R==null&&(R=1);const T=M.length,b=[];for(var m=0;m<T;m++){const F=M[m];b.push([F>>>0&255,F>>>8&255,F>>>16&255,F>>>24&255])}for(m=0;m<T;m++){let F=4294967295;for(var D=0,I=0;I<T;I++){var W=o(b[m],b[I]);I!=m&&W<F&&(F=W,D=I)}}const B=new Uint32Array(x.buffer),H=new Int16Array(g*z*4),k=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(m=0;m<k.length;m++)k[m]=255*((k[m]+.5)/16-.5);for(let F=0;F<z;F++)for(let N=0;N<g;N++){var L;m=4*(F*g+N),R!=2?L=[t(p[m]+H[m]),t(p[m+1]+H[m+1]),t(p[m+2]+H[m+2]),t(p[m+3]+H[m+3])]:(W=k[4*(3&F)+(3&N)],L=[t(p[m]+W),t(p[m+1]+W),t(p[m+2]+W),t(p[m+3]+W)]),D=0;let ie=16777215;for(I=0;I<T;I++){const G=o(L,b[I]);G<ie&&(ie=G,D=I)}const Z=b[D],q=[L[0]-Z[0],L[1]-Z[1],L[2]-Z[2],L[3]-Z[3]];R==1&&(N!=g-1&&i(q,H,m+4,7),F!=z-1&&(N!=0&&i(q,H,m+4*g-4,3),i(q,H,m+4*g,5),N!=g-1&&i(q,H,m+4*g+4,1))),C[m>>2]=D,B[m>>2]=M[D]}}function l(p,g,z,M,x){x==null&&(x={});const{crc:C}=s,R=n.writeUint,T=n.writeUshort,b=n.writeASCII;let m=8;const D=p.frames.length>1;let I,W=!1,B=33+(D?20:0);if(x.sRGB!=null&&(B+=13),x.pHYs!=null&&(B+=21),x.iCCP!=null&&(I=pako.deflate(x.iCCP),B+=21+I.length+4),p.ctype==3){for(var H=p.plte.length,k=0;k<H;k++)p.plte[k]>>>24!=255&&(W=!0);B+=8+3*H+4+(W?8+1*H+4:0)}for(var L=0;L<p.frames.length;L++)D&&(B+=38),B+=(Z=p.frames[L]).cimg.length+12,L!=0&&(B+=4);B+=12;const F=new Uint8Array(B),N=[137,80,78,71,13,10,26,10];for(k=0;k<8;k++)F[k]=N[k];if(R(F,m,13),m+=4,b(F,m,"IHDR"),m+=4,R(F,m,g),m+=4,R(F,m,z),m+=4,F[m]=p.depth,m++,F[m]=p.ctype,m++,F[m]=0,m++,F[m]=0,m++,F[m]=0,m++,R(F,m,C(F,m-17,17)),m+=4,x.sRGB!=null&&(R(F,m,1),m+=4,b(F,m,"sRGB"),m+=4,F[m]=x.sRGB,m++,R(F,m,C(F,m-5,5)),m+=4),x.iCCP!=null){const q=13+I.length;R(F,m,q),m+=4,b(F,m,"iCCP"),m+=4,b(F,m,"ICC profile"),m+=11,m+=2,F.set(I,m),m+=I.length,R(F,m,C(F,m-(q+4),q+4)),m+=4}if(x.pHYs!=null&&(R(F,m,9),m+=4,b(F,m,"pHYs"),m+=4,R(F,m,x.pHYs[0]),m+=4,R(F,m,x.pHYs[1]),m+=4,F[m]=x.pHYs[2],m++,R(F,m,C(F,m-13,13)),m+=4),D&&(R(F,m,8),m+=4,b(F,m,"acTL"),m+=4,R(F,m,p.frames.length),m+=4,R(F,m,x.loop!=null?x.loop:0),m+=4,R(F,m,C(F,m-12,12)),m+=4),p.ctype==3){for(R(F,m,3*(H=p.plte.length)),m+=4,b(F,m,"PLTE"),m+=4,k=0;k<H;k++){const q=3*k,G=p.plte[k],oe=255&G,ce=G>>>8&255,Xe=G>>>16&255;F[m+q+0]=oe,F[m+q+1]=ce,F[m+q+2]=Xe}if(m+=3*H,R(F,m,C(F,m-3*H-4,3*H+4)),m+=4,W){for(R(F,m,H),m+=4,b(F,m,"tRNS"),m+=4,k=0;k<H;k++)F[m+k]=p.plte[k]>>>24&255;m+=H,R(F,m,C(F,m-H-4,H+4)),m+=4}}let ie=0;for(L=0;L<p.frames.length;L++){var Z=p.frames[L];D&&(R(F,m,26),m+=4,b(F,m,"fcTL"),m+=4,R(F,m,ie++),m+=4,R(F,m,Z.rect.width),m+=4,R(F,m,Z.rect.height),m+=4,R(F,m,Z.rect.x),m+=4,R(F,m,Z.rect.y),m+=4,T(F,m,M[L]),m+=2,T(F,m,1e3),m+=2,F[m]=Z.dispose,m++,F[m]=Z.blend,m++,R(F,m,C(F,m-30,30)),m+=4);const q=Z.cimg;R(F,m,(H=q.length)+(L==0?0:4)),m+=4;const G=m;b(F,m,L==0?"IDAT":"fdAT"),m+=4,L!=0&&(R(F,m,ie++),m+=4),F.set(q,m),m+=H,R(F,m,C(F,G,m-G)),m+=4}return R(F,m,0),m+=4,b(F,m,"IEND"),m+=4,R(F,m,C(F,m-4,4)),m+=4,F.buffer}function d(p,g,z){for(let M=0;M<p.frames.length;M++){const x=p.frames[M];x.rect.width;const C=x.rect.height,R=new Uint8Array(C*x.bpl+C);x.cimg=f(x.img,C,x.bpp,x.bpl,R,g,z)}}function a(p,g,z,M,x){const C=x[0],R=x[1],T=x[2],b=x[3],m=x[4],D=x[5];let I=6,W=8,B=255;for(var H=0;H<p.length;H++){const ge=new Uint8Array(p[H]);for(var k=ge.length,L=0;L<k;L+=4)B&=ge[L+3]}const F=B!=255,N=function(ne,K,fe,be,ae,ze){const he=[];for(var J=0;J<ne.length;J++){const we=new Uint8Array(ne[J]),Ie=new Uint32Array(we.buffer);var Re;let xe=0,We=0,_e=K,Qe=fe,Pt=be?1:0;if(J!=0){const nn=ze||be||J==1||he[J-2].dispose!=0?1:2;let Wt=0,hi=1e9;for(let ot=0;ot<nn;ot++){var ke=new Uint8Array(ne[J-1-ot]);const rn=new Uint32Array(ne[J-1-ot]);let je=K,Be=fe,Je=-1,at=-1;for(let qe=0;qe<fe;qe++)for(let Ve=0;Ve<K;Ve++)Ie[pe=qe*K+Ve]!=rn[pe]&&(Ve<je&&(je=Ve),Ve>Je&&(Je=Ve),qe<Be&&(Be=qe),qe>at&&(at=qe));Je==-1&&(je=Be=Je=at=0),ae&&((1&je)==1&&je--,(1&Be)==1&&Be--);const li=(Je-je+1)*(at-Be+1);li<hi&&(hi=li,Wt=ot,xe=je,We=Be,_e=Je-je+1,Qe=at-Be+1)}ke=new Uint8Array(ne[J-1-Wt]),Wt==1&&(he[J-1].dispose=2),Re=new Uint8Array(_e*Qe*4),e(ke,K,fe,Re,_e,Qe,-xe,-We,0),Pt=e(we,K,fe,Re,_e,Qe,-xe,-We,3)?1:0,Pt==1?c(we,K,fe,Re,{x:xe,y:We,width:_e,height:Qe}):e(we,K,fe,Re,_e,Qe,-xe,-We,0)}else Re=we.slice(0);he.push({rect:{x:xe,y:We,width:_e,height:Qe},img:Re,blend:Pt,dispose:0})}if(be)for(J=0;J<he.length;J++){if((Ye=he[J]).blend==1)continue;const we=Ye.rect,Ie=he[J-1].rect,xe=Math.min(we.x,Ie.x),We=Math.min(we.y,Ie.y),_e={x:xe,y:We,width:Math.max(we.x+we.width,Ie.x+Ie.width)-xe,height:Math.max(we.y+we.height,Ie.y+Ie.height)-We};he[J-1].dispose=1,J-1!=0&&u(ne,K,fe,he,J-1,_e,ae),u(ne,K,fe,he,J,_e,ae)}let gt=0;if(ne.length!=1)for(var pe=0;pe<he.length;pe++){var Ye;gt+=(Ye=he[pe]).rect.width*Ye.rect.height}return he}(p,g,z,C,R,T),ie={},Z=[],q=[];if(M!=0){const ge=[];for(L=0;L<N.length;L++)ge.push(N[L].img.buffer);const ne=function(ae){let ze=0;for(var he=0;he<ae.length;he++)ze+=ae[he].byteLength;const J=new Uint8Array(ze);let Re=0;for(he=0;he<ae.length;he++){const ke=new Uint8Array(ae[he]),gt=ke.length;for(let pe=0;pe<gt;pe+=4){let Ye=ke[pe],we=ke[pe+1],Ie=ke[pe+2];const xe=ke[pe+3];xe==0&&(Ye=we=Ie=0),J[Re+pe]=Ye,J[Re+pe+1]=we,J[Re+pe+2]=Ie,J[Re+pe+3]=xe}Re+=gt}return J.buffer}(ge),K=y(ne,M);for(L=0;L<K.plte.length;L++)Z.push(K.plte[L].est.rgba);let fe=0;for(L=0;L<N.length;L++){const be=(oe=N[L]).img.length;var G=new Uint8Array(K.inds.buffer,fe>>2,be>>2);q.push(G);const ae=new Uint8Array(K.abuf,fe,be);D&&h(oe.img,oe.rect.width,oe.rect.height,Z,ae,G),oe.img.set(ae),fe+=be}}else for(H=0;H<N.length;H++){var oe=N[H];const ge=new Uint32Array(oe.img.buffer);var ce=oe.rect.width;for(k=ge.length,G=new Uint8Array(k),q.push(G),L=0;L<k;L++){const ne=ge[L];if(L!=0&&ne==ge[L-1])G[L]=G[L-1];else if(L>ce&&ne==ge[L-ce])G[L]=G[L-ce];else{let K=ie[ne];if(K==null&&(ie[ne]=K=Z.length,Z.push(ne),Z.length>=300))break;G[L]=K}}}const Xe=Z.length;for(Xe<=256&&m==0&&(W=Xe<=2?1:Xe<=4?2:Xe<=16?4:8,W=Math.max(W,b)),H=0;H<N.length;H++){(oe=N[H]).rect.x,oe.rect.y,ce=oe.rect.width;const ge=oe.rect.height;let ne=oe.img;new Uint32Array(ne.buffer);let K=4*ce,fe=4;if(Xe<=256&&m==0){K=Math.ceil(W*ce/8);var Ue=new Uint8Array(K*ge);const be=q[H];for(let ae=0;ae<ge;ae++){L=ae*K;const ze=ae*ce;if(W==8)for(var re=0;re<ce;re++)Ue[L+re]=be[ze+re];else if(W==4)for(re=0;re<ce;re++)Ue[L+(re>>1)]|=be[ze+re]<<4-4*(1&re);else if(W==2)for(re=0;re<ce;re++)Ue[L+(re>>2)]|=be[ze+re]<<6-2*(3&re);else if(W==1)for(re=0;re<ce;re++)Ue[L+(re>>3)]|=be[ze+re]<<7-1*(7&re)}ne=Ue,I=3,fe=1}else if(F==0&&N.length==1){Ue=new Uint8Array(ce*ge*3);const be=ce*ge;for(L=0;L<be;L++){const ae=3*L,ze=4*L;Ue[ae]=ne[ze],Ue[ae+1]=ne[ze+1],Ue[ae+2]=ne[ze+2]}ne=Ue,I=2,fe=3,K=3*ce}oe.img=ne,oe.bpl=K,oe.bpp=fe}return{ctype:I,depth:W,plte:Z,frames:N}}function u(p,g,z,M,x,C,R){const T=Uint8Array,b=Uint32Array,m=new T(p[x-1]),D=new b(p[x-1]),I=x+1<p.length?new T(p[x+1]):null,W=new T(p[x]),B=new b(W.buffer);let H=g,k=z,L=-1,F=-1;for(let ie=0;ie<C.height;ie++)for(let Z=0;Z<C.width;Z++){const q=C.x+Z,G=C.y+ie,oe=G*g+q,ce=B[oe];ce==0||M[x-1].dispose==0&&D[oe]==ce&&(I==null||I[4*oe+3]!=0)||(q<H&&(H=q),q>L&&(L=q),G<k&&(k=G),G>F&&(F=G))}L==-1&&(H=k=L=F=0),R&&((1&H)==1&&H--,(1&k)==1&&k--),C={x:H,y:k,width:L-H+1,height:F-k+1};const N=M[x];N.rect=C,N.blend=1,N.img=new Uint8Array(C.width*C.height*4),M[x-1].dispose==0?(e(m,g,z,N.img,C.width,C.height,-C.x,-C.y,0),c(W,g,z,N.img,C)):e(W,g,z,N.img,C.width,C.height,-C.x,-C.y,0)}function c(p,g,z,M,x){e(p,g,z,M,x.width,x.height,-x.x,-x.y,2)}function f(p,g,z,M,x,C,R){const T=[];let b,m=[0,1,2,3,4];C!=-1?m=[C]:(g*M>5e5||z==1)&&(m=[0]),R&&(b={level:0});const D=sr;for(var I=0;I<m.length;I++){for(let H=0;H<g;H++)v(x,p,H,M,z,m[I]);T.push(D.deflate(x,b))}let W,B=1e9;for(I=0;I<T.length;I++)T[I].length<B&&(W=I,B=T[I].length);return T[W]}function v(p,g,z,M,x,C){const R=z*M;let T=R+z;if(p[T]=C,T++,C==0)if(M<500)for(var b=0;b<M;b++)p[T+b]=g[R+b];else p.set(new Uint8Array(g.buffer,R,M),T);else if(C==1){for(b=0;b<x;b++)p[T+b]=g[R+b];for(b=x;b<M;b++)p[T+b]=g[R+b]-g[R+b-x]+256&255}else if(z==0){for(b=0;b<x;b++)p[T+b]=g[R+b];if(C==2)for(b=x;b<M;b++)p[T+b]=g[R+b];if(C==3)for(b=x;b<M;b++)p[T+b]=g[R+b]-(g[R+b-x]>>1)+256&255;if(C==4)for(b=x;b<M;b++)p[T+b]=g[R+b]-r(g[R+b-x],0,0)+256&255}else{if(C==2)for(b=0;b<M;b++)p[T+b]=g[R+b]+256-g[R+b-M]&255;if(C==3){for(b=0;b<x;b++)p[T+b]=g[R+b]+256-(g[R+b-M]>>1)&255;for(b=x;b<M;b++)p[T+b]=g[R+b]+256-(g[R+b-M]+g[R+b-x]>>1)&255}if(C==4){for(b=0;b<x;b++)p[T+b]=g[R+b]+256-r(0,g[R+b-M],0)&255;for(b=x;b<M;b++)p[T+b]=g[R+b]+256-r(g[R+b-x],g[R+b-M],g[R+b-x-M])&255}}}function y(p,g){const z=new Uint8Array(p),M=z.slice(0),x=new Uint32Array(M.buffer),C=S(M,g),R=C[0],T=C[1],b=z.length,m=new Uint8Array(b>>2);let D;if(z.length<2e7)for(var I=0;I<b;I+=4)D=A(R,W=z[I]*(1/255),B=z[I+1]*(1/255),H=z[I+2]*(1/255),k=z[I+3]*(1/255)),m[I>>2]=D.ind,x[I>>2]=D.est.rgba;else for(I=0;I<b;I+=4){var W=z[I]*.00392156862745098,B=z[I+1]*(1/255),H=z[I+2]*(1/255),k=z[I+3]*(1/255);for(D=R;D.left;)D=O(D.est,W,B,H,k)<=0?D.left:D.right;m[I>>2]=D.ind,x[I>>2]=D.est.rgba}return{abuf:M.buffer,inds:m,plte:T}}function S(p,g,z){z==null&&(z=1e-4);const M=new Uint32Array(p.buffer),x={i0:0,i1:p.length,bst:null,est:null,tdst:0,left:null,right:null};x.bst=P(p,x.i0,x.i1),x.est=w(x.bst);const C=[x];for(;C.length<g;){let T=0,b=0;for(var R=0;R<C.length;R++)C[R].est.L>T&&(T=C[R].est.L,b=R);if(T<z)break;const m=C[b],D=U(p,M,m.i0,m.i1,m.est.e,m.est.eMq255);if(m.i0>=D||m.i1<=D){m.est.L=0;continue}const I={i0:m.i0,i1:D,bst:null,est:null,tdst:0,left:null,right:null};I.bst=P(p,I.i0,I.i1),I.est=w(I.bst);const W={i0:D,i1:m.i1,bst:null,est:null,tdst:0,left:null,right:null};for(W.bst={R:[],m:[],N:m.bst.N-I.bst.N},R=0;R<16;R++)W.bst.R[R]=m.bst.R[R]-I.bst.R[R];for(R=0;R<4;R++)W.bst.m[R]=m.bst.m[R]-I.bst.m[R];W.est=w(W.bst),m.left=I,m.right=W,C[b]=I,C.push(W)}for(C.sort((T,b)=>b.bst.N-T.bst.N),R=0;R<C.length;R++)C[R].ind=R;return[x,C]}function A(p,g,z,M,x){if(p.left==null)return p.tdst=function(I,W,B,H,k){const L=W-I[0],F=B-I[1],N=H-I[2],ie=k-I[3];return L*L+F*F+N*N+ie*ie}(p.est.q,g,z,M,x),p;const C=O(p.est,g,z,M,x);let R=p.left,T=p.right;C>0&&(R=p.right,T=p.left);const b=A(R,g,z,M,x);if(b.tdst<=C*C)return b;const m=A(T,g,z,M,x);return m.tdst<b.tdst?m:b}function O(p,g,z,M,x){const{e:C}=p;return C[0]*g+C[1]*z+C[2]*M+C[3]*x-p.eMq}function U(p,g,z,M,x,C){for(M-=4;z<M;){for(;E(p,z,x)<=C;)z+=4;for(;E(p,M,x)>C;)M-=4;if(z>=M)break;const R=g[z>>2];g[z>>2]=g[M>>2],g[M>>2]=R,z+=4,M-=4}for(;E(p,z,x)>C;)z-=4;return z+4}function E(p,g,z){return p[g]*z[0]+p[g+1]*z[1]+p[g+2]*z[2]+p[g+3]*z[3]}function P(p,g,z){const M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],x=[0,0,0,0],C=z-g>>2;for(let R=g;R<z;R+=4){const T=p[R]*.00392156862745098,b=p[R+1]*(1/255),m=p[R+2]*(1/255),D=p[R+3]*(1/255);x[0]+=T,x[1]+=b,x[2]+=m,x[3]+=D,M[0]+=T*T,M[1]+=T*b,M[2]+=T*m,M[3]+=T*D,M[5]+=b*b,M[6]+=b*m,M[7]+=b*D,M[10]+=m*m,M[11]+=m*D,M[15]+=D*D}return M[4]=M[1],M[8]=M[2],M[9]=M[6],M[12]=M[3],M[13]=M[7],M[14]=M[11],{R:M,m:x,N:C}}function w(p){const{R:g}=p,{m:z}=p,{N:M}=p,x=z[0],C=z[1],R=z[2],T=z[3],b=M==0?0:1/M,m=[g[0]-x*x*b,g[1]-x*C*b,g[2]-x*R*b,g[3]-x*T*b,g[4]-C*x*b,g[5]-C*C*b,g[6]-C*R*b,g[7]-C*T*b,g[8]-R*x*b,g[9]-R*C*b,g[10]-R*R*b,g[11]-R*T*b,g[12]-T*x*b,g[13]-T*C*b,g[14]-T*R*b,g[15]-T*T*b],D=m,I=_;let W=[Math.random(),Math.random(),Math.random(),Math.random()],B=0,H=0;if(M!=0)for(let L=0;L<16&&(W=I.multVec(D,W),H=Math.sqrt(I.dot(W,W)),W=I.sml(1/H,W),!(L!=0&&Math.abs(H-B)<1e-9));L++)B=H;const k=[x*b,C*b,R*b,T*b];return{Cov:m,q:k,e:W,L:B,eMq255:I.dot(I.sml(255,k),W),eMq:I.dot(W,k),rgba:(Math.round(255*k[3])<<24|Math.round(255*k[2])<<16|Math.round(255*k[1])<<8|Math.round(255*k[0])<<0)>>>0}}var _={multVec:(p,g)=>[p[0]*g[0]+p[1]*g[1]+p[2]*g[2]+p[3]*g[3],p[4]*g[0]+p[5]*g[1]+p[6]*g[2]+p[7]*g[3],p[8]*g[0]+p[9]*g[1]+p[10]*g[2]+p[11]*g[3],p[12]*g[0]+p[13]*g[1]+p[14]*g[2]+p[15]*g[3]],dot:(p,g)=>p[0]*g[0]+p[1]*g[1]+p[2]*g[2]+p[3]*g[3],sml:(p,g)=>[p*g[0],p*g[1],p*g[2],p*g[3]]};Te.encode=function(g,z,M,x,C,R,T){x==null&&(x=0),T==null&&(T=!1);const b=a(g,z,M,x,[!1,!1,!1,0,T,!1]);return d(b,-1),l(b,z,M,C,R)},Te.encodeLL=function(g,z,M,x,C,R,T,b){const m={ctype:0+(x==1?0:2)+(C==0?0:4),depth:R,frames:[]},D=(x+C)*R,I=D*z;for(let W=0;W<g.length;W++)m.frames.push({rect:{x:0,y:0,width:z,height:M},img:new Uint8Array(g[W]),blend:0,dispose:1,bpp:Math.ceil(D/8),bpl:Math.ceil(I/8)});return d(m,0,!0),l(m,z,M,T,b)},Te.encode.compress=a,Te.encode.dither=h,Te.quantize=y,Te.quantize.getKDtree=S,Te.quantize.getNearest=A})();const Yi={toArrayBuffer(e,n){const r=e.width,s=e.height,i=r<<2,t=e.getContext("2d").getImageData(0,0,r,s),o=new Uint32Array(t.data.buffer),h=(32*r+31)/32<<2,l=h*s,d=122+l,a=new ArrayBuffer(d),u=new DataView(a),c=1<<20;let f,v,y,S,A=c,O=0,U=0,E=0;function P(p){u.setUint16(U,p,!0),U+=2}function w(p){u.setUint32(U,p,!0),U+=4}function _(p){U+=p}P(19778),w(d),_(4),w(122),w(108),w(r),w(-s>>>0),P(1),P(32),w(3),w(l),w(2835),w(2835),_(8),w(16711680),w(65280),w(255),w(4278190080),w(1466527264),function p(){for(;O<s&&A>0;){for(S=122+O*h,f=0;f<i;)A--,v=o[E++],y=v>>>24,u.setUint32(S+f,v<<8|y),f+=4;O++}E<o.length?(A=c,setTimeout(p,Yi._dly)):n(a)}()},toBlob(e,n){this.toArrayBuffer(e,r=>{n(new Blob([r],{type:"image/bmp"}))})},_dly:9};var ye={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},or={[ye.CHROME]:16384,[ye.FIREFOX]:11180,[ye.DESKTOP_SAFARI]:16384,[ye.IE]:8192,[ye.IOS]:4096,[ye.ETC]:8192};const oi=typeof window<"u",Qi=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Ct=oi&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),ar=(oi||Qi)&&(Ct&&Ct.getOriginalSymbol(window,"File")||typeof File<"u"&&File),qi=(oi||Qi)&&(Ct&&Ct.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function ai(e,n,r=Date.now()){return new Promise(s=>{const i=e.split(","),t=i[0].match(/:(.*?);/)[1],o=globalThis.atob(i[1]);let h=o.length;const l=new Uint8Array(h);for(;h--;)l[h]=o.charCodeAt(h);const d=new Blob([l],{type:t});d.name=n,d.lastModified=r,s(d)})}function Vi(e){return new Promise((n,r)=>{const s=new qi;s.onload=()=>n(s.result),s.onerror=i=>r(i),s.readAsDataURL(e)})}function Zi(e){return new Promise((n,r)=>{const s=new Image;s.onload=()=>n(s),s.onerror=i=>r(i),s.src=e})}function Ze(){if(Ze.cachedResult!==void 0)return Ze.cachedResult;let e=ye.ETC;const{userAgent:n}=navigator;return/Chrom(e|ium)/i.test(n)?e=ye.CHROME:/iP(ad|od|hone)/i.test(n)&&/WebKit/i.test(n)?e=ye.IOS:/Safari/i.test(n)?e=ye.DESKTOP_SAFARI:/Firefox/i.test(n)?e=ye.FIREFOX:(/MSIE/i.test(n)||document.documentMode)&&(e=ye.IE),Ze.cachedResult=e,Ze.cachedResult}function Gi(e,n){const r=Ze(),s=or[r];let i=e,t=n,o=i*t;const h=i>t?t/i:i/t;for(;o>s*s;){const l=(s+i)/2,d=(s+t)/2;l<d?(t=d,i=d*h):(t=l*h,i=l),o=i*t}return{width:i,height:t}}function Dt(e,n){let r,s;try{if(r=new OffscreenCanvas(e,n),s=r.getContext("2d"),s===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{r=document.createElement("canvas"),s=r.getContext("2d")}return r.width=e,r.height=n,[r,s]}function Ki(e,n){const{width:r,height:s}=Gi(e.width,e.height),[i,t]=Dt(r,s);return n&&/jpe?g/.test(n)&&(t.fillStyle="white",t.fillRect(0,0,i.width,i.height)),t.drawImage(e,0,0,i.width,i.height),i}function Rt(){return Rt.cachedResult!==void 0||(Rt.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Rt.cachedResult}function Et(e,n={}){return new Promise(function(r,s){let i,t;var o=function(){try{return t=Ki(i,n.fileType||e.type),r([i,t])}catch(l){return s(l)}},h=function(l){try{var d=function(a){try{throw a}catch(u){return s(u)}};try{let a;return Vi(e).then(function(u){try{return a=u,Zi(a).then(function(c){try{return i=c,function(){try{return o()}catch(f){return s(f)}}()}catch(f){return d(f)}},d)}catch(c){return d(c)}},d)}catch(a){d(a)}}catch(a){return s(a)}};try{if(Rt()||[ye.DESKTOP_SAFARI,ye.MOBILE_SAFARI].includes(Ze()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then(function(l){try{return i=l,o()}catch{return h()}},h)}catch{h()}})}function It(e,n,r,s,i=1){return new Promise(function(t,o){let h;if(n==="image/png"){let d,a,u;return d=e.getContext("2d"),{data:a}=d.getImageData(0,0,e.width,e.height),u=Te.encode([a.buffer],e.width,e.height,4096*i),h=new Blob([u],{type:n}),h.name=r,h.lastModified=s,l.call(this)}{let d=function(){return l.call(this)};if(n==="image/bmp")return new Promise(a=>Yi.toBlob(e,a)).then((function(a){try{return h=a,h.name=r,h.lastModified=s,d.call(this)}catch(u){return o(u)}}).bind(this),o);{let a=function(){return d.call(this)};if(typeof OffscreenCanvas=="function"&&e instanceof OffscreenCanvas)return e.convertToBlob({type:n,quality:i}).then((function(u){try{return h=u,h.name=r,h.lastModified=s,a.call(this)}catch(c){return o(c)}}).bind(this),o);{let u;return u=e.toDataURL(n,i),ai(u,r,s).then((function(c){try{return h=c,a.call(this)}catch(f){return o(f)}}).bind(this),o)}}}function l(){return t(h)}})}function Fe(e){e.width=0,e.height=0}function it(){return new Promise(function(e,n){let r,s,i,t;return it.cachedResult!==void 0?e(it.cachedResult):ai("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(o){try{return r=o,Et(r).then(function(h){try{return s=h[1],It(s,r.type,r.name,r.lastModified).then(function(l){try{return i=l,Fe(s),Et(i).then(function(d){try{return t=d[0],it.cachedResult=t.width===1&&t.height===2,e(it.cachedResult)}catch(a){return n(a)}},n)}catch(d){return n(d)}},n)}catch(l){return n(l)}},n)}catch(h){return n(h)}},n)})}function Ji(e){return new Promise((n,r)=>{const s=new qi;s.onload=i=>{const t=new DataView(i.target.result);if(t.getUint16(0,!1)!=65496)return n(-2);const o=t.byteLength;let h=2;for(;h<o;){if(t.getUint16(h+2,!1)<=8)return n(-1);const l=t.getUint16(h,!1);if(h+=2,l==65505){if(t.getUint32(h+=2,!1)!=1165519206)return n(-1);const d=t.getUint16(h+=6,!1)==18761;h+=t.getUint32(h+4,d);const a=t.getUint16(h,d);h+=2;for(let u=0;u<a;u++)if(t.getUint16(h+12*u,d)==274)return n(t.getUint16(h+12*u+8,d))}else{if((65280&l)!=65280)break;h+=t.getUint16(h,!1)}}return n(-1)},s.onerror=i=>r(i),s.readAsArrayBuffer(e)})}function en(e,n){const{width:r}=e,{height:s}=e,{maxWidthOrHeight:i}=n;let t,o=e;return isFinite(i)&&(r>i||s>i)&&([o,t]=Dt(r,s),r>s?(o.width=i,o.height=s/r*i):(o.width=r/s*i,o.height=i),t.drawImage(e,0,0,o.width,o.height),Fe(e)),o}function tn(e,n){const{width:r}=e,{height:s}=e,[i,t]=Dt(r,s);switch(n>4&&n<9?(i.width=s,i.height=r):(i.width=r,i.height=s),n){case 2:t.transform(-1,0,0,1,r,0);break;case 3:t.transform(-1,0,0,-1,r,s);break;case 4:t.transform(1,0,0,-1,0,s);break;case 5:t.transform(0,1,1,0,0,0);break;case 6:t.transform(0,1,-1,0,s,0);break;case 7:t.transform(0,-1,-1,0,s,r);break;case 8:t.transform(0,-1,1,0,0,r)}return t.drawImage(e,0,0,r,s),Fe(e),i}function xi(e,n,r=0){return new Promise(function(s,i){let t,o,h,l,d,a,u,c,f,v,y,S,A,O,U,E,P,w,_,p;function g(M=5){if(n.signal&&n.signal.aborted)throw n.signal.reason;t+=M,n.onProgress(Math.min(t,100))}function z(M){if(n.signal&&n.signal.aborted)throw n.signal.reason;t=Math.min(Math.max(M,t),100),n.onProgress(t)}return t=r,o=n.maxIteration||10,h=1024*n.maxSizeMB*1024,g(),Et(e,n).then((function(M){try{return[,l]=M,g(),d=en(l,n),g(),new Promise(function(x,C){var R;if(!(R=n.exifOrientation))return Ji(e).then((function(b){try{return R=b,T.call(this)}catch(m){return C(m)}}).bind(this),C);function T(){return x(R)}return T.call(this)}).then((function(x){try{return a=x,g(),it().then((function(C){try{return u=C?d:tn(d,a),g(),c=n.initialQuality||1,f=n.fileType||e.type,It(u,f,e.name,e.lastModified,c).then((function(R){try{{let b=function(){if(o--&&(U>h||U>A)){let D,I;return D=p?.95*_.width:_.width,I=p?.95*_.height:_.height,[P,w]=Dt(D,I),w.drawImage(_,0,0,D,I),c*=f==="image/png"?.85:.95,It(P,f,e.name,e.lastModified,c).then(function(W){try{return E=W,Fe(_),_=P,U=E.size,z(Math.min(99,Math.floor((O-U)/(O-h)*100))),b}catch(B){return i(B)}},i)}return[1]},m=function(){return Fe(_),Fe(P),Fe(d),Fe(u),Fe(l),z(100),s(E)};if(v=R,g(),y=v.size>h,S=v.size>e.size,!y&&!S)return z(100),s(v);var T;return A=e.size,O=v.size,U=O,_=u,p=!n.alwaysKeepResolution&&y,(T=(function(D){for(;D;){if(D.then)return void D.then(T,i);try{if(D.pop){if(D.length)return D.pop()?m.call(this):D;D=b}else D=D.call(this)}catch(I){return i(I)}}}).bind(this))(b)}}catch(b){return i(b)}}).bind(this),i)}catch(R){return i(R)}}).bind(this),i)}catch(C){return i(C)}}).bind(this),i)}catch(x){return i(x)}}).bind(this),i)})}const hr=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Yt;function lr(e,n){return new Promise((r,s)=>{Yt||(Yt=function(o){const h=[];return h.push(o),URL.createObjectURL(new Blob(h))}(hr));const i=new Worker(Yt);i.addEventListener("message",function(o){if(n.signal&&n.signal.aborted)i.terminate();else if(o.data.progress===void 0){if(o.data.error)return s(new Error(o.data.error)),void i.terminate();r(o.data.file),i.terminate()}else n.onProgress(o.data.progress)}),i.addEventListener("error",s),n.signal&&n.signal.addEventListener("abort",()=>{s(n.signal.reason),i.terminate()}),i.postMessage({file:e,imageCompressionLibUrl:n.libURL,options:{...n,onProgress:void 0,signal:void 0}})})}function ve(e,n){return new Promise(function(r,s){let i,t,o,h,l,d;if(i={...n},o=0,{onProgress:h}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,l=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=f=>{o=f,typeof h=="function"&&h(o)},!(e instanceof Blob||e instanceof ar))return s(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return s(new Error("The file given is not an image"));if(d=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!l||typeof Worker!="function"||d)return xi(e,i).then((function(f){try{return t=f,c.call(this)}catch(v){return s(v)}}).bind(this),s);var a=(function(){try{return c.call(this)}catch(f){return s(f)}}).bind(this),u=function(f){try{return xi(e,i).then(function(v){try{return t=v,a()}catch(y){return s(y)}},s)}catch(v){return s(v)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",lr(e,i).then(function(f){try{return t=f,a()}catch{return u()}},u)}catch{u()}function c(){try{t.name=e.name,t.lastModified=e.lastModified}catch{}try{i.preserveExif&&e.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===e.type)&&(t=Xi(e,t))}catch{}return r(t)}})}ve.getDataUrlFromFile=Vi,ve.getFilefromDataUrl=ai,ve.loadImage=Zi,ve.drawImageInCanvas=Ki,ve.drawFileInCanvas=Et,ve.canvasToFile=It,ve.getExifOrientation=Ji,ve.handleMaxWidthOrHeight=en,ve.followExifOrientation=tn,ve.cleanupCanvasMemory=Fe,ve.isAutoOrientationInBrowser=it,ve.approximateBelowMaximumCanvasSizeOfBrowser=Gi,ve.copyExifWithoutOrientation=Xi,ve.getBrowserName=Ze,ve.version="2.0.2";function cr(e){const{fileInput:n,previewUrl:r,triggerFileInput:s,handleFileChange:i,clearFileInput:t}=tr({...e,onImageUpload(y){y.previewUrl&&(l.value=!0,a.value=!1)}}),o=$e(null),h=$e(null),l=$e(!1),d=$e(!1),a=$e(!1),u=()=>{a.value=!0},c=()=>{r.value=null,l.value=!1,o.value=null,a.value=!1,d.value=!1,t()},f=async(y,S)=>{const A="cropped_image",O=new File([y],A,{type:y.type}),U={maxSizeMB:(e==null?void 0:e.maxDeliverSizeMB)||5,maxWidthOrHeight:S,useWebWorker:!0,fileType:"image/webp"};try{const E=await ve(O,U);return Lt.log(`Compressed to ${S}px:`,E.size/1024,"KB",E.type),E}catch(E){return Lt.error("Error during image compression:",E),null}};return{fileInput:n,cropper:o,previewUrl:r,croppedImage:h,showCropper:l,isLoading:d,isCropperReady:a,onCropperReady:u,triggerFileInput:s,handleFileChange:i,closeCropper:c,applyCrop:async()=>{var S,A;d.value=!0;const y=(A=(S=o.value)==null?void 0:S.getResult())==null?void 0:A.canvas;if(y)try{return await new Promise((O,U)=>{y.toBlob(async E=>{if(!E)return U(new ft("Something went wrong","We encountered an error while processing your image. Please try again later"));const P=y.toDataURL("image/webp"),w=new FormData;for(const{filename:_,maxWidthOrHeight:p}of e.imageDetails){const g=await f(E,p);if(g){const z=`${_}.${g.type.split("/")[1]}`;w.append(e.name,g,z)}}try{e!=null&&e.onImageProcessed&&await e.onImageProcessed(w)}catch(_){return U(_)}h.value=P,c(),O()},"image/webp")})}catch(O){Lt.log(O),ft.handle(O)}finally{d.value=!1}}}}const ur={class:"flex flex-col md:flex-row mb-4 items-center gap-3"},fr={class:"w-24 h-24 rounded-full border-4 border-foreground overflow-hidden shadow-md bg-foreground"},dr={key:0,alt:"Profile",class:"object-cover w-full h-full"},mr={class:"flex md:flex-col gap-2"},gr={class:"bg-background mb-6 rounded-lg overflow-hidden w-full"},pr=["src"],vr=Ci({__name:"ProfileImageSettings",setup(e){const{user:n}=Ei(),{updateUserProfileImage:r,removeUserProfileImage:s}=Ii(),{displayAlertDialog:i}=ln(),t=()=>{i({title:"Remove profile photo?",confirmText:"Remove",onConfirm:s})},{fileInput:o,previewUrl:h,cropper:l,showCropper:d,isCropperReady:a,isLoading:u,triggerFileInput:c,handleFileChange:f,applyCrop:v,closeCropper:y,onCropperReady:S}=cr({name:"profileImage",imageDetails:[{filename:"large",maxWidthOrHeight:800},{filename:"medium",maxWidthOrHeight:256},{filename:"small",maxWidthOrHeight:64},{filename:"lazy",maxWidthOrHeight:10}],maxSizeMB:50,allowedTypes:["image/jpeg","image/png","image/jpg","image/webp","image/avif"],onImageProcessed:r});return(A,O)=>{var E,P,w,_,p,g;const U=cn("lazy");return V(),At("div",null,[le("div",ur,[le("div",fr,[(E=$(n))!=null&&E.profileImage?ei((V(),At("img",dr,null,512)),[[U,{src:(w=(P=$(n))==null?void 0:P.profileImage)==null?void 0:w.medium.url,loading:(p=(_=$(n))==null?void 0:_.profileImage)==null?void 0:p.lazy.url}]]):(V(),te($(un),{key:1,class:"rounded-full w-full h-full"},{default:ee(()=>[X($(lt),{class:"size-10"})]),_:1}))]),le("div",mr,[le("input",{type:"file",ref_key:"fileInput",ref:o,onChange:O[0]||(O[0]=(...z)=>$(f)&&$(f)(...z)),accept:"image/png, image/jpeg, image/jpg, image/webp",class:"hidden"},null,544),X($(ut),{onClick:$(c)},{default:ee(()=>[X($(wn),{class:"w-4 h-4"}),O[1]||(O[1]=ct(" Change "))]),_:1},8,["onClick"]),(g=$(n))!=null&&g.profileImage?(V(),te($(ut),{key:0,variant:"outline",onClick:t},{default:ee(()=>[X($(An),{class:"w-4 h-4"}),O[2]||(O[2]=ct(" Remove "))]),_:1})):Mt("",!0)])]),X($(mn),{open:$(d)},{default:ee(()=>[X($(fn),{"hide-close":""},{default:ee(()=>[le("div",gr,[X($(Ni),{class:"w-full img-h",src:$(h),"stencil-component":$($i),"stencil-props":{aspectRatio:1},"auto-zoom":!0,"resize-image":!0,ref_key:"cropper",ref:l,onReady:$(S)},null,8,["src","stencil-component","onReady"]),$(a)?Mt("",!0):(V(),At("img",{key:0,class:"w-full img-h object-cover object-center",src:$(h)||""},null,8,pr))]),X($(dn),{class:"gap-2 flex-col sm:flex-col sm:justify-start"},{default:ee(()=>[X($(ut),{onClick:$(v),class:di({"opacity-50":!$(a)}),disabled:!$(a),loading:$(u),"show-loading":""},{default:ee(()=>O[3]||(O[3]=[ct("Save and upload")])),_:1},8,["onClick","class","disabled","loading"]),X($(ut),{variant:"outline",onClick:$(y),class:di({"opacity-50":!$(a)||$(u)}),disabled:!$(a)||$(u)},{default:ee(()=>O[4]||(O[4]=[ct("Cancel")])),_:1},8,["onClick","class","disabled"])]),_:1})]),_:1})]),_:1},8,["open"])])}}}),br=gn(vr,[["__scopeId","data-v-94194ce1"]]),wr={class:"mt-4"},yr={class:"flex flex-col lg:flex-row lg:gap-6"},Ar={class:"flex-1"},zr={class:"mb-2.5"},Rr={class:"mb-2.5"},xr={class:"mb-2.5"},Mr={class:"mb-2.5"},Sr={class:"flex-1"},Cr={class:"mb-2.5"},Er={class:"mb-2.5"},Ir={class:"mt-5"},Dr=Ci({__name:"ProfileSettingsView",setup(e){var h,l,d,a,u,c;const{user:n}=Ei(),{updateUserLoading:r,updateUser:s}=Ii(),i=sn(on({email:et().email(),lastName:et().min(3,"Surname must be at least 3 characters"),firstName:et().min(3,"First name must be at least 3 characters"),otherNames:et().min(3,"Other names must be at least 3 characters").optional().or(ci("")),nickName:et().min(3,"Nickname must be at least 3 characters"),description:et().min(20,"Description must be at least 20 characters").max(350,"Description must not be more than 350 characters").optional().or(ci(""))})),o=an({validationSchema:i,initialValues:{email:(h=n.value)==null?void 0:h.email,lastName:((l=n.value)==null?void 0:l.lastName)||"",firstName:((d=n.value)==null?void 0:d.firstName)||"",otherNames:((a=n.value)==null?void 0:a.otherNames)||"",nickName:((u=n.value)==null?void 0:u.nickName)||"",description:((c=n.value)==null?void 0:c.description)||""}}).handleSubmit(async f=>{await s(f)});return(f,v)=>(V(),At("div",null,[v[2]||(v[2]=le("div",null,[le("h3",{class:"text-lg font-medium"},"Profile"),le("p",{class:"text-sm text-muted-foreground"}," Make changes to your profile here. Click save when you're done. ")],-1)),X($(pn),{class:"mt-6 h-0.5"}),le("div",wr,[X(br),le("form",{onSubmit:v[0]||(v[0]=(...y)=>$(o)&&$(o)(...y))},[le("div",yr,[le("div",Ar,[le("div",zr,[X(ht,{name:"lastName",type:"text",placeholder:"Surname","show-label":"",disabled:$(r)},{default:ee(()=>[X($(lt),{class:"size-4"})]),_:1},8,["disabled"])]),le("div",Rr,[X(ht,{name:"firstName",type:"text",placeholder:"First Name","show-label":"",disabled:$(r)},{default:ee(()=>[X($(lt),{class:"size-4"})]),_:1},8,["disabled"])]),le("div",xr,[X(ht,{name:"otherNames",type:"text",placeholder:"Other Names (Optional)","show-label":"",disabled:$(r)},{default:ee(()=>[X($(lt),{class:"size-4"})]),_:1},8,["disabled"])]),le("div",Mr,[X(ht,{name:"email",type:"text",placeholder:"Email Address",disabled:"","show-label":""},{default:ee(()=>[X($(bn),{class:"size-4"})]),_:1})])]),le("div",Sr,[le("div",Cr,[X(ht,{name:"nickName",type:"text",placeholder:"Nickname","show-label":"",disabled:$(r)},{default:ee(()=>[X($(lt),{class:"size-4"})]),_:1},8,["disabled"])]),le("div",Er,[X(vn,{name:"description",placeholder:"Description",class:"h-[120px] rounded-xl","show-label":"",disabled:$(r)},{default:ee(()=>[X($(yn),{class:"size-4"})]),_:1},8,["disabled"])])])]),le("div",Ir,[X($(ut),{type:"submit",class:"w-full md:w-auto mb-2",loading:$(r),"show-loading":!0},{default:ee(()=>v[1]||(v[1]=[ct(" Save Changes ")])),_:1},8,["loading"])])],32)])]))}});export{Dr as default};
